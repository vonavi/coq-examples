<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" class="alectryon-standalone" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.20.1: https://docutils.sourceforge.io/" />
<title>Coq: How to prove max a b &lt;= a + b?</title>
<link rel="stylesheet" href="alectryon.css" type="text/css" />
<link rel="stylesheet" href="docutils_basic.css" type="text/css" />
<link rel="stylesheet" href="pygments.css" type="text/css" />
<script type="text/javascript" src="alectryon.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" />
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class="alectryon-root alectryon-centered"><div class="document" id="coq-how-to-prove-max-a-b-a-b">
<h1 class="title">Coq: How to prove <tt class="docutils literal">max a b &lt;= a + b</tt>?</h1>
<table class="docinfo" frame="void" rules="none">
<col class="docinfo-name" />
<col class="docinfo-content" />
<tbody valign="top">
<tr class="link field"><th class="docinfo-name">Link:</th><td class="field-body"><a class="reference external" href="https://stackoverflow.com/q/46410116">https://stackoverflow.com/q/46410116</a></td>
</tr>
</tbody>
</table>
<input type="checkbox" class="alectryon-toggle" id="alectryon-toggle-0" /><label for="alectryon-toggle-0" class="alectryon-toggle-label">Display all goals and responses</label><div class="alectryon-container docutils container">
<div class="section" id="question-re3el">
<h1>Question (re3el)</h1>
<p>I am unable to prove the simple logic <tt class="docutils literal">max a b &lt;= a + b</tt> using coq's
tactics. How should I go about solving it? Below is the code that I
worked on till now. <tt class="docutils literal">s_le_n</tt> is proved but not mentioned here for
the sake of simplicity.</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="coq-how-to-prove-max-a-b-ab-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="coq-how-to-prove-max-a-b-ab-v-chk0"><span class="kn">Theorem</span> <span class="nf">s_le_n</span>: <span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span>: nat),  a &lt;= b -&gt; S a &lt;= S b.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : nat, a &lt;= b -&gt; S a &lt;= S b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="coq-how-to-prove-max-a-b-ab-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="coq-how-to-prove-max-a-b-ab-v-chk1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : nat, a &lt;= b -&gt; S a &lt;= S b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Admitted</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="coq-how-to-prove-max-a-b-ab-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="coq-how-to-prove-max-a-b-ab-v-chk2"><span class="kn">Theorem</span> <span class="nf">max_sum</span>: <span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span>: nat), max a b &lt;= a + b.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : nat, Nat.max a b &lt;= a + b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="coq-how-to-prove-max-a-b-ab-v-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="coq-how-to-prove-max-a-b-ab-v-chk3"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : nat, Nat.max a b &lt;= a + b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="coq-how-to-prove-max-a-b-ab-v-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="coq-how-to-prove-max-a-b-ab-v-chk4"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>a, b</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Nat.max a b &lt;= a + b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="coq-how-to-prove-max-a-b-ab-v-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="coq-how-to-prove-max-a-b-ab-v-chk5"><span class="nb">induction</span> a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>b</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Nat.max <span class="mi">0</span> b &lt;= <span class="mi">0</span> + b</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="coq-how-to-prove-max-a-b-ab-v-chk6" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>a, b</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHa</var><span class="hyp-type"><b>: </b><span>Nat.max a b &lt;= a + b</span></span></span><br></div><label class="goal-separator" for="coq-how-to-prove-max-a-b-ab-v-chk6"><hr></label><div class="goal-conclusion">Nat.max (S a) b &lt;= S a + b</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="coq-how-to-prove-max-a-b-ab-v-chk7" style="display: none" type="checkbox"><label class="alectryon-input" for="coq-how-to-prove-max-a-b-ab-v-chk7">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>b</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Nat.max <span class="mi">0</span> b &lt;= <span class="mi">0</span> + b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="coq-how-to-prove-max-a-b-ab-v-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="coq-how-to-prove-max-a-b-ab-v-chk8"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>b</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">b &lt;= b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> le_n.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="coq-how-to-prove-max-a-b-ab-v-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="coq-how-to-prove-max-a-b-ab-v-chk9">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>a, b</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHa</var><span class="hyp-type"><b>: </b><span>Nat.max a b &lt;= a + b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Nat.max (S a) b &lt;= S a + b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="coq-how-to-prove-max-a-b-ab-v-chka" style="display: none" type="checkbox"><label class="alectryon-input" for="coq-how-to-prove-max-a-b-ab-v-chka"><span class="nb">rewrite</span> plus_Sn_m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>a, b</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHa</var><span class="hyp-type"><b>: </b><span>Nat.max a b &lt;= a + b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Nat.max (S a) b &lt;= S (a + b)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="coq-how-to-prove-max-a-b-ab-v-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="coq-how-to-prove-max-a-b-ab-v-chkb"><span class="nb">induction</span> b.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>a</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHa</var><span class="hyp-type"><b>: </b><span>Nat.max a <span class="mi">0</span> &lt;= a + <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Nat.max (S a) <span class="mi">0</span> &lt;= S (a + <span class="mi">0</span>)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="coq-how-to-prove-max-a-b-ab-v-chkc" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>a, b</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHa</var><span class="hyp-type"><b>: </b><span>Nat.max a (S b) &lt;= a + S b</span></span></span><br><span><var>IHb</var><span class="hyp-type"><b>: </b><span>Nat.max a b &lt;= a + b -&gt; Nat.max (S a) b &lt;= S (a + b)</span></span></span><br></div><label class="goal-separator" for="coq-how-to-prove-max-a-b-ab-v-chkc"><hr></label><div class="goal-conclusion">Nat.max (S a) (S b) &lt;= S (a + S b)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="coq-how-to-prove-max-a-b-ab-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="coq-how-to-prove-max-a-b-ab-v-chkd">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>a</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHa</var><span class="hyp-type"><b>: </b><span>Nat.max a <span class="mi">0</span> &lt;= a + <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Nat.max (S a) <span class="mi">0</span> &lt;= S (a + <span class="mi">0</span>)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="coq-how-to-prove-max-a-b-ab-v-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="coq-how-to-prove-max-a-b-ab-v-chke"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>a</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHa</var><span class="hyp-type"><b>: </b><span>Nat.max a <span class="mi">0</span> &lt;= a + <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">S a &lt;= S (a + <span class="mi">0</span>)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="coq-how-to-prove-max-a-b-ab-v-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="coq-how-to-prove-max-a-b-ab-v-chkf"><span class="nb">rewrite</span> &lt;- plus_n_O.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>a</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHa</var><span class="hyp-type"><b>: </b><span>Nat.max a <span class="mi">0</span> &lt;= a + <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">S a &lt;= S a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> le_n.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="coq-how-to-prove-max-a-b-ab-v-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="coq-how-to-prove-max-a-b-ab-v-chk10">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>a, b</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHa</var><span class="hyp-type"><b>: </b><span>Nat.max a (S b) &lt;= a + S b</span></span></span><br><span><var>IHb</var><span class="hyp-type"><b>: </b><span>Nat.max a b &lt;= a + b -&gt; Nat.max (S a) b &lt;= S (a + b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Nat.max (S a) (S b) &lt;= S (a + S b)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="coq-how-to-prove-max-a-b-ab-v-chk11" style="display: none" type="checkbox"><label class="alectryon-input" for="coq-how-to-prove-max-a-b-ab-v-chk11"><span class="nb">rewrite</span> &lt;- plus_Sn_m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>a, b</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHa</var><span class="hyp-type"><b>: </b><span>Nat.max a (S b) &lt;= a + S b</span></span></span><br><span><var>IHb</var><span class="hyp-type"><b>: </b><span>Nat.max a b &lt;= a + b -&gt; Nat.max (S a) b &lt;= S (a + b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Nat.max (S a) (S b) &lt;= S a + S b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="coq-how-to-prove-max-a-b-ab-v-chk12" style="display: none" type="checkbox"><label class="alectryon-input" for="coq-how-to-prove-max-a-b-ab-v-chk12"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>a, b</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHa</var><span class="hyp-type"><b>: </b><span>Nat.max a (S b) &lt;= a + S b</span></span></span><br><span><var>IHb</var><span class="hyp-type"><b>: </b><span>Nat.max a b &lt;= a + b -&gt; Nat.max (S a) b &lt;= S (a + b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">S (Nat.max a b) &lt;= S (a + S b)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="coq-how-to-prove-max-a-b-ab-v-chk13" style="display: none" type="checkbox"><label class="alectryon-input" for="coq-how-to-prove-max-a-b-ab-v-chk13"><span class="nb">apply</span> s_le_n.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>a, b</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHa</var><span class="hyp-type"><b>: </b><span>Nat.max a (S b) &lt;= a + S b</span></span></span><br><span><var>IHb</var><span class="hyp-type"><b>: </b><span>Nat.max a b &lt;= a + b -&gt; Nat.max (S a) b &lt;= S (a + b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Nat.max a b &lt;= a + S b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="coq-how-to-prove-max-a-b-ab-v-chk14" style="display: none" type="checkbox"><label class="alectryon-input alectryon-failed" for="coq-how-to-prove-max-a-b-ab-v-chk14"><span class="nb">rewrite</span> IHa.</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">Found no subterm matching <span class="s2">&quot;Nat.max a (S b)&quot;</span> <span class="kr">in</span> the current goal.</blockquote></div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>a, b</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHa</var><span class="hyp-type"><b>: </b><span>Nat.max a (S b) &lt;= a + S b</span></span></span><br><span><var>IHb</var><span class="hyp-type"><b>: </b><span>Nat.max a b &lt;= a + b -&gt; Nat.max (S a) b &lt;= S (a + b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Nat.max a b &lt;= a + S b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span></pre><hr class="docutils" />
<p><strong>Q (ejgallego):</strong> The proof is less than 40 characters using the
library, I could post it; however, let me ask you something, how would
you prove this lemma using pen and paper?</p>
<p><strong>A (re3el):</strong> &#64;ejgallego <tt class="docutils literal">if (a &gt; b) then max a b = a, a &lt; a + b;
else max a b = b, b &lt; a + b</tt>. I am unable to use this logic in coq.</p>
</div>
<div class="section" id="answer-ejgallego">
<h1>Answer (ejgallego)</h1>
<p>Taking into account &#64;re3el comment, we start from their &quot;pen and paper
proof&quot;:</p>
<pre class="code literal-block">
if (a &gt; b) then max a b = a, a &lt; a + b; else max a b = b, b &lt; a + b
</pre>
<p>Let's now translate that into Coq! In fact, the first thing we need to
do is case on the decidability of <tt class="docutils literal">&lt;</tt>, this is done using the
<tt class="docutils literal">le_lt_dec a b</tt> lemma. The rest is routine:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> Arith.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="coq-how-to-prove-max-a-b-ab-v-chk15" style="display: none" type="checkbox"><label class="alectryon-input" for="coq-how-to-prove-max-a-b-ab-v-chk15"><span class="kn">Theorem</span> <span class="nf">max_sum</span> (<span class="nv">a</span> <span class="nv">b</span>: nat) : max a b &lt;= a + b.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>a, b</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Init.Nat.max a b &lt;= a + b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="coq-how-to-prove-max-a-b-ab-v-chk16" style="display: none" type="checkbox"><label class="alectryon-input" for="coq-how-to-prove-max-a-b-ab-v-chk16"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>a, b</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Init.Nat.max a b &lt;= a + b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="coq-how-to-prove-max-a-b-ab-v-chk17" style="display: none" type="checkbox"><label class="alectryon-input" for="coq-how-to-prove-max-a-b-ab-v-chk17"><span class="nb">case</span> (le_lt_dec a b).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>a, b</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a &lt;= b -&gt; Init.Nat.max a b &lt;= a + b</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="coq-how-to-prove-max-a-b-ab-v-chk18" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>a, b</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><label class="goal-separator" for="coq-how-to-prove-max-a-b-ab-v-chk18"><hr></label><div class="goal-conclusion">b &lt; a -&gt; Init.Nat.max a b &lt;= a + b</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="coq-how-to-prove-max-a-b-ab-v-chk19" style="display: none" type="checkbox"><label class="alectryon-input" for="coq-how-to-prove-max-a-b-ab-v-chk19">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>a, b</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a &lt;= b -&gt; Init.Nat.max a b &lt;= a + b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> &lt;- Nat.max_r_iff; <span class="nb">intros</span> -&gt;; <span class="nb">apply</span> le_plus_r.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="coq-how-to-prove-max-a-b-ab-v-chk1a" style="display: none" type="checkbox"><label class="alectryon-input" for="coq-how-to-prove-max-a-b-ab-v-chk1a">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>a, b</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">b &lt; a -&gt; Init.Nat.max a b &lt;= a + b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="coq-how-to-prove-max-a-b-ab-v-chk1b" style="display: none" type="checkbox"><label class="alectryon-input" for="coq-how-to-prove-max-a-b-ab-v-chk1b"><span class="nb">intros</span> ha; <span class="nb">apply</span> Nat.lt_le_incl, Nat.max_l_iff <span class="kr">in</span> ha.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>a, b</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>ha</var><span class="hyp-type"><b>: </b><span>Nat.max a b = a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Init.Nat.max a b &lt;= a + b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> ha; <span class="nb">apply</span> le_plus_l.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><p>However, we can improve this proof quite a bit. There are various
candidates, a good one using the stdlib is:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="coq-how-to-prove-max-a-b-ab-v-chk1c" style="display: none" type="checkbox"><label class="alectryon-input" for="coq-how-to-prove-max-a-b-ab-v-chk1c"><span class="kn">Theorem</span> <span class="nf">max_sum_1</span> (<span class="nv">a</span> <span class="nv">b</span>: nat) : max a b &lt;= a + b.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>a, b</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Init.Nat.max a b &lt;= a + b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="coq-how-to-prove-max-a-b-ab-v-chk1d" style="display: none" type="checkbox"><label class="alectryon-input" for="coq-how-to-prove-max-a-b-ab-v-chk1d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>a, b</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Init.Nat.max a b &lt;= a + b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> Nat.max_lub_iff; <span class="nb">split</span>; [<span class="nb">apply</span> le_plus_l | <span class="nb">apply</span> le_plus_r].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><p>Using my library of choice [math-comp], you can chain the rewrites to
get a more compact proof:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="coq-how-to-prove-max-a-b-ab-v-chk1e" style="display: none" type="checkbox"><label class="alectryon-input" for="coq-how-to-prove-max-a-b-ab-v-chk1e"><span class="kn">From</span> mathcomp <span class="kn">Require Import</span> all_ssreflect.</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message"><span class="kn">Notation</span> <span class="s2">&quot;[ rel _ _ | _ ]&quot;</span> was already used <span class="kr">in</span> scope
fun_scope. [notation-overridden,parsing]</blockquote><blockquote class="alectryon-message"><span class="kn">Notation</span> <span class="s2">&quot;[ rel _ _ : _ | _ ]&quot;</span> was already used <span class="kr">in</span>
scope fun_scope. [notation-overridden,parsing]</blockquote><blockquote class="alectryon-message"><span class="kn">Notation</span> <span class="s2">&quot;[ rel _ _ in _ &amp; _ | _ ]&quot;</span> was already used
<span class="kr">in</span> scope fun_scope. [notation-overridden,parsing]</blockquote><blockquote class="alectryon-message"><span class="kn">Notation</span> <span class="s2">&quot;[ rel _ _ in _ &amp; _ ]&quot;</span> was already used <span class="kr">in</span>
scope fun_scope. [notation-overridden,parsing]</blockquote><blockquote class="alectryon-message"><span class="kn">Notation</span> <span class="s2">&quot;[ rel _ _ in _ | _ ]&quot;</span> was already used <span class="kr">in</span>
scope fun_scope. [notation-overridden,parsing]</blockquote><blockquote class="alectryon-message"><span class="kn">Notation</span> <span class="s2">&quot;[ rel _ _ in _ ]&quot;</span> was already used <span class="kr">in</span> scope
fun_scope. [notation-overridden,parsing]</blockquote><blockquote class="alectryon-message"><span class="kn">Notation</span> <span class="s2">&quot;_ + _&quot;</span> was already used <span class="kr">in</span> scope nat_scope.
[notation-overridden,parsing]</blockquote><blockquote class="alectryon-message"><span class="kn">Notation</span> <span class="s2">&quot;_ - _&quot;</span> was already used <span class="kr">in</span> scope nat_scope.
[notation-overridden,parsing]</blockquote><blockquote class="alectryon-message"><span class="kn">Notation</span> <span class="s2">&quot;_ &lt;= _&quot;</span> was already used <span class="kr">in</span> scope nat_scope.
[notation-overridden,parsing]</blockquote><blockquote class="alectryon-message"><span class="kn">Notation</span> <span class="s2">&quot;_ &lt; _&quot;</span> was already used <span class="kr">in</span> scope nat_scope.
[notation-overridden,parsing]</blockquote><blockquote class="alectryon-message"><span class="kn">Notation</span> <span class="s2">&quot;_ &gt;= _&quot;</span> was already used <span class="kr">in</span> scope nat_scope.
[notation-overridden,parsing]</blockquote><blockquote class="alectryon-message"><span class="kn">Notation</span> <span class="s2">&quot;_ &gt; _&quot;</span> was already used <span class="kr">in</span> scope nat_scope.
[notation-overridden,parsing]</blockquote><blockquote class="alectryon-message"><span class="kn">Notation</span> <span class="s2">&quot;_ &lt;= _ &lt;= _&quot;</span> was already used <span class="kr">in</span> scope
nat_scope. [notation-overridden,parsing]</blockquote><blockquote class="alectryon-message"><span class="kn">Notation</span> <span class="s2">&quot;_ &lt; _ &lt;= _&quot;</span> was already used <span class="kr">in</span> scope
nat_scope. [notation-overridden,parsing]</blockquote><blockquote class="alectryon-message"><span class="kn">Notation</span> <span class="s2">&quot;_ &lt;= _ &lt; _&quot;</span> was already used <span class="kr">in</span> scope
nat_scope. [notation-overridden,parsing]</blockquote><blockquote class="alectryon-message"><span class="kn">Notation</span> <span class="s2">&quot;_ &lt; _ &lt; _&quot;</span> was already used <span class="kr">in</span> scope
nat_scope. [notation-overridden,parsing]</blockquote><blockquote class="alectryon-message"><span class="kn">Notation</span> <span class="s2">&quot;_ * _&quot;</span> was already used <span class="kr">in</span> scope nat_scope.
[notation-overridden,parsing]</blockquote><blockquote class="alectryon-message"><span class="kn">Notation</span> <span class="s2">&quot;_ ^ _&quot;</span> was already used <span class="kr">in</span> scope nat_scope.
[notation-overridden,parsing]</blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="coq-how-to-prove-max-a-b-ab-v-chk1f" style="display: none" type="checkbox"><label class="alectryon-input" for="coq-how-to-prove-max-a-b-ab-v-chk1f"><span class="kn">Theorem</span> <span class="nf">max_sum_2</span> (<span class="nv">a</span> <span class="nv">b</span>: nat) : maxn a b &lt;= a + b.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>a, b</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">maxn a b &lt;= a + b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="coq-how-to-prove-max-a-b-ab-v-chk20" style="display: none" type="checkbox"><label class="alectryon-input" for="coq-how-to-prove-max-a-b-ab-v-chk20"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>a, b</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">maxn a b &lt;= a + b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> geq_max leq_addl leq_addr.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><p>In fact, on the light of short proof, maybe the original lemma was not
even needed in the first place.</p>
<p>edit: &#64;Jason Gross mentions another style of proof a more seasoned
used would use:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="coq-how-to-prove-max-a-b-ab-v-chk21" style="display: none" type="checkbox"><label class="alectryon-input" for="coq-how-to-prove-max-a-b-ab-v-chk21"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>a, b</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Nat.max a b &lt;= a + b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> Max.max_case_strong; <span class="bp">lia</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><p>However, this proof involves the use of a heavyweight automation
tactic, <tt class="docutils literal">lia</tt>; I strongly advise all beginners to avoid such tactics
for a while, and learn how to do proofs more &quot;manually&quot;. In fact,
using any of the SMT-enabled tactics, the original goal can be simply
solved with a call to a SMT.</p>
<hr class="docutils" />
<p><strong>A (Jason Gross):</strong> There's also a short proof without ssr: <tt class="docutils literal">Require
Import Lia. apply Max.max_case_strong; lia</tt>. It might be nice to
mention this in the answer.</p>
<p><strong>A (ejgallego):</strong> Thanks Jason; I tend to prefer not to teach <tt class="docutils literal">lia</tt>
and other automated tactics to beginners, IMHO it is very important
that they learn how to do proofs without automation first.</p>
</div>
</div>
</div>
</div></body>
</html>
