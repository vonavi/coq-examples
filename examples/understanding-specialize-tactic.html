<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" class="alectryon-standalone" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.18: http://docutils.sourceforge.net/" />
<title>understanding-specialize-tactic.v</title>
<link rel="stylesheet" href="alectryon.css" type="text/css" />
<link rel="stylesheet" href="docutils_basic.css" type="text/css" />
<link rel="stylesheet" href="pygments.css" type="text/css" />
<script type="text/javascript" src="alectryon.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" />
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class="alectryon-root alectryon-centered"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Coq+SerAPI v8.13.0+0.13.0. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus. On Mac, use <kbd>‚åò</kbd> instead of <kbd>Ctrl</kbd>.</div><div class="document">


<p>Understanding specialize tactic</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Link:</th><td class="field-body"><a class="reference external" href="https://stackoverflow.com/questions/56828692/understanding-specialize-tactic">https://stackoverflow.com/questions/56828692/understanding-specialize-tactic</a></td>
</tr>
</tbody>
</table>
<div class="section" id="question">
<h1>Question</h1>
<p>Trying to comprehend the <a class="reference external" href="https://stackoverflow.com/a/56773900/789186">answer</a> of &#64;keep_learning I
walked through this code step by step:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Inductive</span> <span class="nf">nostutter</span> {<span class="nv">X</span> : <span class="kt">Type</span>} : list X -&gt; <span class="kt">Prop</span> :=
| ns_nil : nostutter []
| ns_one : <span class="kr">forall</span> (<span class="nv">x</span> : X), nostutter [x]
| ns_cons: <span class="kr">forall</span> (<span class="nv">x</span> : X) (<span class="nv">h</span> : X) (<span class="nv">t</span> : list X),
    nostutter (h :: t) -&gt; x &lt;&gt; h -&gt; nostutter (x :: h :: t).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="understanding-specialize-tactic-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="understanding-specialize-tactic-v-chk0"><span class="kn">Example</span> <span class="nf">test_nostutter_4</span> : not (nostutter [<span class="mi">3</span>;<span class="mi">1</span>;<span class="mi">1</span>;<span class="mi">4</span>]).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">~ nostutter [<span class="mi">3</span>; <span class="mi">1</span>; <span class="mi">1</span>; <span class="mi">4</span>]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="understanding-specialize-tactic-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="understanding-specialize-tactic-v-chk1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">~ nostutter [<span class="mi">3</span>; <span class="mi">1</span>; <span class="mi">1</span>; <span class="mi">4</span>]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="understanding-specialize-tactic-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="understanding-specialize-tactic-v-chk2"><span class="nb">intro</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>nostutter [<span class="mi">3</span>; <span class="mi">1</span>; <span class="mi">1</span>; <span class="mi">4</span>]</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="understanding-specialize-tactic-v-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="understanding-specialize-tactic-v-chk3"><span class="nb">inversion_clear</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H0</var><span class="hyp-type"><b>: </b><span>nostutter [<span class="mi">1</span>; <span class="mi">1</span>; <span class="mi">4</span>]</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="mi">3</span> &lt;&gt; <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="understanding-specialize-tactic-v-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="understanding-specialize-tactic-v-chk4"><span class="nb">inversion_clear</span> H0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="mi">3</span> &lt;&gt; <span class="mi">1</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>nostutter [<span class="mi">1</span>; <span class="mi">4</span>]</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;&gt; <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="understanding-specialize-tactic-v-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="understanding-specialize-tactic-v-chk5"><span class="nb">unfold</span> not <span class="kr">in</span> H2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="mi">3</span> &lt;&gt; <span class="mi">1</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>nostutter [<span class="mi">1</span>; <span class="mi">4</span>]</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> = <span class="mi">1</span> -&gt; <span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* We are here *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="understanding-specialize-tactic-v-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="understanding-specialize-tactic-v-chk6"><span class="nb">specialize</span> (H2 eq_refl).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="mi">3</span> &lt;&gt; <span class="mi">1</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>nostutter [<span class="mi">1</span>; <span class="mi">4</span>]</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> H2.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><p>Here is what we have before executing <code class="highlight coq"><span class="nb">specialize</span></code></p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="understanding-specialize-tactic-v-chk7" style="display: none" type="checkbox"><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="mi">3</span> &lt;&gt; <span class="mi">1</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>nostutter [<span class="mi">1</span>; <span class="mi">4</span>]</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> = <span class="mi">1</span> -&gt; <span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small></span></pre><p>Here is <code class="highlight coq"><span class="n">eq</span></code> Prop whose constructor <code class="highlight coq"><span class="n">eq_refl</span></code> is used in <code class="highlight coq"><span class="nb">specialize</span></code>:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="understanding-specialize-tactic-v-chk8" style="display: none" type="checkbox"><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message"><span class="kn">Inductive</span> <span class="nf">eq</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">x</span> : A) : A -&gt; <span class="kt">Prop</span> :=
    eq_refl : x = x

<span class="kn">Arguments</span> eq {A}%type_scope _ _
<span class="kn">Arguments</span> eq_refl {A}%type_scope {x}, [_] _</blockquote></div></div></small></span></pre><p>I can't explain, how this command works:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="understanding-specialize-tactic-v-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="understanding-specialize-tactic-v-chk9"><span class="nb">specialize</span> (H2 eq_refl).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="mi">3</span> &lt;&gt; <span class="mi">1</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>nostutter [<span class="mi">1</span>; <span class="mi">4</span>]</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small></span></pre><p>I read about <code class="highlight coq"><span class="nb">specialize</span></code> in reference manual, but the explanation
there is too broad. As far as I understand it sees that <code class="highlight coq"><span class="mi">1</span> <span class="o">=</span> <span class="mi">1</span></code>
expression in <code class="highlight coq"><span class="n">H2</span></code> satisfies <code class="highlight coq"><span class="n">eq_refl</span></code> constructor and therefore <code class="highlight coq"><span class="n">eq</span></code>
proposition is <code class="highlight coq"><span class="kt">True</span></code>. Then it simplifies the expression:</p>
<p><code class="highlight coq"><span class="kt">True</span> <span class="o">-&gt;</span> <span class="kt">False</span> <span class="o">=&gt;</span> <span class="kt">False</span></code></p>
<p>And we get</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="understanding-specialize-tactic-v-chka" style="display: none" type="checkbox"><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="mi">3</span> &lt;&gt; <span class="mi">1</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>nostutter [<span class="mi">1</span>; <span class="mi">4</span>]</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small></span></pre><p>Can somebody provide me a minimal example with explanation of what is
<code class="highlight coq"><span class="nb">specialize</span></code> doing, so I could freely use it?</p>
<div class="section" id="update">
<h2>Update</h2>
<p>Trying to imitate how <code class="highlight coq"><span class="nb">specialize</span></code> works using apply I did the
following:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="understanding-specialize-tactic-v-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="understanding-specialize-tactic-v-chkb"><span class="kn">Example</span> <span class="nf">specialize</span> {<span class="nv">A</span> <span class="nv">B</span>: <span class="kt">Type</span>} (<span class="nv">H</span>: A -&gt; B) (<span class="nv">a</span>: A): B.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">B</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="understanding-specialize-tactic-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="understanding-specialize-tactic-v-chkc"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">B</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="understanding-specialize-tactic-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="understanding-specialize-tactic-v-chkd"><span class="nb">apply</span> H <span class="kr">in</span> a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">B</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span></pre><p>Almost the same as <code class="highlight coq"><span class="nb">specialize</span></code>, only different hypothesis name.</p>
<p>In <code class="highlight coq"><span class="n">test_nostutter_4</span></code> theorem I tried this and it worked:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="understanding-specialize-tactic-v-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="understanding-specialize-tactic-v-chke"><span class="nb">remember</span> (@eq_refl nat <span class="mi">1</span>) <span class="kr">as</span> Heq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="mi">3</span> &lt;&gt; <span class="mi">1</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>nostutter [<span class="mi">1</span>; <span class="mi">4</span>]</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> = <span class="mi">1</span> -&gt; <span class="kt">False</span></span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> = <span class="mi">1</span></span></span></span><br><span><var>HeqHeq</var><span class="hyp-type"><b>: </b><span>Heq = eq_refl</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="understanding-specialize-tactic-v-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="understanding-specialize-tactic-v-chkf"><span class="nb">apply</span> H2 <span class="kr">in</span> Heq <span class="kr">as</span> H3.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="mi">3</span> &lt;&gt; <span class="mi">1</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>nostutter [<span class="mi">1</span>; <span class="mi">4</span>]</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> = <span class="mi">1</span> -&gt; <span class="kt">False</span></span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> = <span class="mi">1</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="kt">False</span></span></span></span><br><span><var>HeqHeq</var><span class="hyp-type"><b>: </b><span>Heq = eq_refl</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span></pre><p>This one was more complex, we had to introduce a new hypothesis <code class="highlight coq"><span class="n">Heq</span></code>.
But we got what we need - <code class="highlight coq"><span class="n">H3</span></code> at the end.</p>
<p>Does specialize internally use something like remember? Or is it
possible to solve it with apply but without remember?</p>
</div>
</div>
<div class="section" id="answer-1">
<h1>Answer</h1>
<p><code class="highlight coq"><span class="nb">specialize</span></code>, in its simplest form, simply replaces a given hypothesis
with that hypothesis applied to some other term.</p>
<p>In this proof,</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="understanding-specialize-tactic-v-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="understanding-specialize-tactic-v-chk10"><span class="kn">Example</span> <span class="nf">specialize</span> {<span class="nv">A</span> <span class="nv">B</span>: <span class="kt">Type</span>} (<span class="nv">H</span>: A -&gt; B) (<span class="nv">a</span>: A): B.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">B</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="understanding-specialize-tactic-v-chk11" style="display: none" type="checkbox"><label class="alectryon-input" for="understanding-specialize-tactic-v-chk11"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">B</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="understanding-specialize-tactic-v-chk12" style="display: none" type="checkbox"><label class="alectryon-input" for="understanding-specialize-tactic-v-chk12"><span class="nb">specialize</span> (H a).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">B</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> H.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><p>we initially have the hypothesis <code class="highlight coq"><span class="n">H</span><span class="o">:</span> <span class="n">A</span> <span class="o">-&gt;</span> <span class="n">B</span></code>. When we call <code class="highlight coq"><span class="nb">specialize</span>
<span class="o">(</span><span class="n">H</span> <span class="n">a</span><span class="o">)</span></code>, we apply <code class="highlight coq"><span class="n">H</span></code> to <code class="highlight coq"><span class="n">a</span></code> (apply as in function application). This
gives us something of type <code class="highlight coq"><span class="n">B</span></code>. <code class="highlight coq"><span class="nb">specialize</span></code> then gets rid of the old
<code class="highlight coq"><span class="n">H</span></code> for us and replaces it with the result of the application. It
gives the new hypothesis the same name: <code class="highlight coq"><span class="n">H</span></code>.</p>
<p>In your case, we have <code class="highlight coq"><span class="n">H2</span><span class="o">:</span> <span class="mi">1</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-&gt;</span> <span class="kt">False</span></code>, which is a function from
the type <code class="highlight coq"><span class="mi">1</span> <span class="o">=</span> <span class="mi">1</span></code> to the type <code class="highlight coq"><span class="kt">False</span></code>. That means that <code class="highlight coq"><span class="n">H2</span></code> applied to
<code class="highlight coq"><span class="n">eq_refl</span></code> is of type <code class="highlight coq"><span class="kt">False</span></code>, i.e. <code class="highlight coq"><span class="n">H2</span> <span class="n">eq_refl</span><span class="o">:</span> <span class="kt">False</span></code>. When we use
the tactic <code class="highlight coq"><span class="nb">specialize</span> <span class="o">(</span><span class="n">H2</span> <span class="n">eq_refl</span><span class="o">).</span></code>, the old <code class="highlight coq"><span class="n">H2</span></code> is cleared and
replaced by a new term (<code class="highlight coq"><span class="n">H2</span> <span class="n">eq_refl</span></code>) whose type is <code class="highlight coq"><span class="kt">False</span></code>. It keeps
the old name <code class="highlight coq"><span class="n">H2</span></code>, though.</p>
<p><code class="highlight coq"><span class="nb">specialize</span></code> is useful when you're sure that you're only going to use
a hypothesis once, since it automatically gets rid of the old
hypothesis. One disadvantage is that the old name may not fit the
meaning of the new hypothesis. However, in your case and in my
example, <code class="highlight coq"><span class="n">H</span></code> is a generic enough name that it works either way.</p>
<hr class="docutils" />
<p>To your update...</p>
<p><code class="highlight coq"><span class="nb">specialize</span></code> is a core tactic defined directly in the ltac plugin. It
doesn't use any other tactic internally, since it is its internals.</p>
<p>If you want to keep a hypothesis, you can use the <code class="highlight coq"><span class="kr">as</span></code> modifier, which
works for both <code class="highlight coq"><span class="nb">specialize</span></code> and <code class="highlight coq"><span class="nb">apply</span></code>. In the proof</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="understanding-specialize-tactic-v-chk13" style="display: none" type="checkbox"><label class="alectryon-input" for="understanding-specialize-tactic-v-chk13"><span class="kn">Example</span> <span class="nf">specialize</span> {<span class="nv">A</span> <span class="nv">B</span>: <span class="kt">Type</span>} (<span class="nv">H</span>: A -&gt; B) (<span class="nv">a</span>: A): B.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">B</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="understanding-specialize-tactic-v-chk14" style="display: none" type="checkbox"><label class="alectryon-input" for="understanding-specialize-tactic-v-chk14"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">B</div></blockquote></div></div></small></span></pre><p>if you do <code class="highlight coq"><span class="nb">specialize</span> <span class="o">(</span><span class="n">H</span> <span class="n">a</span><span class="o">)</span> <span class="kr">as</span> <span class="n">H0</span><span class="o">.</span></code>, instead of clearing <code class="highlight coq"><span class="n">H</span></code>, it'll
introduce a new hypothesis <code class="highlight coq"><span class="n">H0</span><span class="o">:</span> <span class="n">B</span></code>. <code class="highlight coq"><span class="nb">apply</span> <span class="n">H</span> <span class="kr">in</span> <span class="n">a</span> <span class="kr">as</span> <span class="n">H0</span><span class="o">.</span></code> has the same
effect.</p>
</div>
</div>
</div></body>
</html>
