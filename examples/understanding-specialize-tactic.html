<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" class="alectryon-standalone" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<title>Understanding specialize tactic</title>
<link rel="stylesheet" href="alectryon.css" type="text/css" />
<link rel="stylesheet" href="docutils_basic.css" type="text/css" />
<link rel="stylesheet" href="pygments.css" type="text/css" />
<script type="text/javascript" src="alectryon.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" />
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class="alectryon-root alectryon-centered"><div class="document" id="understanding-specialize-tactic">
<h1 class="title">Understanding specialize tactic</h1>
<table class="docinfo" frame="void" rules="none">
<col class="docinfo-name" />
<col class="docinfo-content" />
<tbody valign="top">
<tr class="link field"><th class="docinfo-name">Link:</th><td class="field-body"><a class="reference external" href="https://stackoverflow.com/q/56828692">https://stackoverflow.com/q/56828692</a></td>
</tr>
</tbody>
</table>
<input type="checkbox" class="alectryon-toggle" id="alectryon-toggle-0" /><label for="alectryon-toggle-0" class="alectryon-toggle-label">Display all goals and responses</label><div class="alectryon-container docutils container">
<div class="section" id="question">
<h1>Question</h1>
<p>Trying to comprehend the <a class="reference external" href="https://stackoverflow.com/a/56773900/789186">answer</a> of &#64;keep_learning I
walked through this code step by step:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Inductive</span> <span class="nf">nostutter</span> {<span class="nv">X</span> : <span class="kt">Type</span>} : list X -&gt; <span class="kt">Prop</span> :=
| ns_nil : nostutter []
| ns_one : <span class="kr">forall</span> (<span class="nv">x</span> : X), nostutter [x]
| ns_cons: <span class="kr">forall</span> (<span class="nv">x</span> : X) (<span class="nv">h</span> : X) (<span class="nv">t</span> : list X),
    nostutter (h :: t) -&gt; x &lt;&gt; h -&gt; nostutter (x :: h :: t).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="understanding-specialize-tactic-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="understanding-specialize-tactic-v-chk0"><span class="kn">Example</span> <span class="nf">test_nostutter_4</span> : not (nostutter [<span class="mi">3</span>;<span class="mi">1</span>;<span class="mi">1</span>;<span class="mi">4</span>]).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">~ nostutter [<span class="mi">3</span>; <span class="mi">1</span>; <span class="mi">1</span>; <span class="mi">4</span>]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="understanding-specialize-tactic-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="understanding-specialize-tactic-v-chk1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">~ nostutter [<span class="mi">3</span>; <span class="mi">1</span>; <span class="mi">1</span>; <span class="mi">4</span>]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="understanding-specialize-tactic-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="understanding-specialize-tactic-v-chk2"><span class="nb">intro</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>nostutter [<span class="mi">3</span>; <span class="mi">1</span>; <span class="mi">1</span>; <span class="mi">4</span>]</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="understanding-specialize-tactic-v-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="understanding-specialize-tactic-v-chk3"><span class="nb">inversion_clear</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H0</var><span class="hyp-type"><b>: </b><span>nostutter [<span class="mi">1</span>; <span class="mi">1</span>; <span class="mi">4</span>]</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="mi">3</span> &lt;&gt; <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="understanding-specialize-tactic-v-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="understanding-specialize-tactic-v-chk4"><span class="nb">inversion_clear</span> H0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="mi">3</span> &lt;&gt; <span class="mi">1</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>nostutter [<span class="mi">1</span>; <span class="mi">4</span>]</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;&gt; <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="understanding-specialize-tactic-v-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="understanding-specialize-tactic-v-chk5"><span class="nb">unfold</span> not <span class="kr">in</span> H2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="mi">3</span> &lt;&gt; <span class="mi">1</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>nostutter [<span class="mi">1</span>; <span class="mi">4</span>]</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> = <span class="mi">1</span> -&gt; <span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* We are here *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="understanding-specialize-tactic-v-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="understanding-specialize-tactic-v-chk6"><span class="nb">specialize</span> (H2 eq_refl).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="mi">3</span> &lt;&gt; <span class="mi">1</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>nostutter [<span class="mi">1</span>; <span class="mi">4</span>]</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> H2.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><p>Here is what we have before executing <tt class="docutils literal">specialize</tt></p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="understanding-specialize-tactic-v-chk7" style="display: none" type="checkbox"><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message"><span class="mi">1</span> subgoal

  H1 : <span class="mi">3</span> &lt;&gt; <span class="mi">1</span>
  H : nostutter [<span class="mi">1</span>; <span class="mi">4</span>]
  H2 : <span class="mi">1</span> = <span class="mi">1</span> -&gt; <span class="kt">False</span>
  ============================
  <span class="kt">False</span></blockquote></div></div></small></span></pre><p>Here is <tt class="docutils literal">eq</tt> Prop whose constructor <tt class="docutils literal">eq_refl</tt> is used in
<tt class="docutils literal">specialize</tt>:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="understanding-specialize-tactic-v-chk8" style="display: none" type="checkbox"><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message"><span class="kn">Inductive</span> <span class="nf">eq</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">x</span> : A) : A -&gt; <span class="kt">Prop</span> :=
    eq_refl : x = x

<span class="kn">Arguments</span> eq {A}%type_scope _ _
<span class="kn">Arguments</span> eq_refl {A}%type_scope {x}, [_] _</blockquote></div></div></small></span></pre><p>I can't explain, how this command works:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="understanding-specialize-tactic-v-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="understanding-specialize-tactic-v-chk9"><span class="nb">specialize</span> (H2 eq_refl).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="mi">3</span> &lt;&gt; <span class="mi">1</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>nostutter [<span class="mi">1</span>; <span class="mi">4</span>]</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small></span></pre><p>I read about <tt class="docutils literal">specialize</tt> in reference manual, but the explanation
there is too broad. As far as I understand it sees that <tt class="docutils literal">1 = 1</tt>
expression in <tt class="docutils literal">H2</tt> satisfies <tt class="docutils literal">eq_refl</tt> constructor and therefore
<tt class="docutils literal">eq</tt> proposition is <tt class="docutils literal">True</tt>. Then it simplifies the expression:</p>
<pre class="code coq literal-block">
<span class="kt">True</span> <span class="o">-&gt;</span> <span class="kt">False</span> <span class="o">=&gt;</span> <span class="kt">False</span>
</pre>
<p>And we get</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="understanding-specialize-tactic-v-chka" style="display: none" type="checkbox"><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message"><span class="mi">1</span> subgoal

  H1 : <span class="mi">3</span> &lt;&gt; <span class="mi">1</span>
  H : nostutter [<span class="mi">1</span>; <span class="mi">4</span>]
  H2 : <span class="kt">False</span>
  ============================
  <span class="kt">False</span></blockquote></div></div></small></span></pre><p>Can somebody provide me a minimal example with explanation of what is
<tt class="docutils literal">specialize</tt> doing, so I could freely use it?</p>
<div class="section" id="update">
<h2>Update</h2>
<p>Trying to imitate how <tt class="docutils literal">specialize</tt> works using apply I did the
following:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="understanding-specialize-tactic-v-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="understanding-specialize-tactic-v-chkb"><span class="kn">Example</span> <span class="nf">specialize</span> {<span class="nv">A</span> <span class="nv">B</span>: <span class="kt">Type</span>} (<span class="nv">H</span>: A -&gt; B) (<span class="nv">a</span>: A): B.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">B</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="understanding-specialize-tactic-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="understanding-specialize-tactic-v-chkc"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">B</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="understanding-specialize-tactic-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="understanding-specialize-tactic-v-chkd"><span class="nb">apply</span> H <span class="kr">in</span> a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">B</div></blockquote></div></div></small></span></pre><p>This gives:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="understanding-specialize-tactic-v-chke" style="display: none" type="checkbox"><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message"><span class="mi">1</span> subgoal

  A : <span class="kt">Type</span>
  B : <span class="kt">Type</span>
  H : A -&gt; B
  a : B
  ============================
  B</blockquote></div></div></small></span></pre><p>Almost the same as <tt class="docutils literal">specialize</tt>, only different hypothesis name.</p>
<p>In <tt class="docutils literal">test_nostutter_4</tt> theorem I tried this and it worked:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="understanding-specialize-tactic-v-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="understanding-specialize-tactic-v-chkf"><span class="nb">remember</span> (@eq_refl nat <span class="mi">1</span>) <span class="kr">as</span> Heq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="mi">3</span> &lt;&gt; <span class="mi">1</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>nostutter [<span class="mi">1</span>; <span class="mi">4</span>]</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> = <span class="mi">1</span> -&gt; <span class="kt">False</span></span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> = <span class="mi">1</span></span></span></span><br><span><var>HeqHeq</var><span class="hyp-type"><b>: </b><span>Heq = eq_refl</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="understanding-specialize-tactic-v-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="understanding-specialize-tactic-v-chk10"><span class="nb">apply</span> H2 <span class="kr">in</span> Heq <span class="kr">as</span> H3.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="mi">3</span> &lt;&gt; <span class="mi">1</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>nostutter [<span class="mi">1</span>; <span class="mi">4</span>]</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> = <span class="mi">1</span> -&gt; <span class="kt">False</span></span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> = <span class="mi">1</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="kt">False</span></span></span></span><br><span><var>HeqHeq</var><span class="hyp-type"><b>: </b><span>Heq = eq_refl</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small></span></pre><p>It gives us:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="understanding-specialize-tactic-v-chk11" style="display: none" type="checkbox"><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message"><span class="mi">1</span> subgoal

  H1 : <span class="mi">3</span> &lt;&gt; <span class="mi">1</span>
  H : nostutter [<span class="mi">1</span>; <span class="mi">4</span>]
  H2 : <span class="mi">1</span> = <span class="mi">1</span> -&gt; <span class="kt">False</span>
  Heq : <span class="mi">1</span> = <span class="mi">1</span>
  H3 : <span class="kt">False</span>
  HeqHeq : Heq = eq_refl
  ============================
  <span class="kt">False</span></blockquote></div></div></small></span></pre><p>This one was more complex, we had to introduce a new hypothesis
<tt class="docutils literal">Heq</tt>. But we got what we need - <tt class="docutils literal">H3</tt> at the end.</p>
<p>Does specialize internally use something like remember? Or is it
possible to solve it with apply but without remember?</p>
</div>
</div>
<div class="section" id="answer">
<h1>Answer</h1>
<p><tt class="docutils literal">specialize</tt>, in its simplest form, simply replaces a given
hypothesis with that hypothesis applied to some other term.</p>
<p>In this proof,</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="understanding-specialize-tactic-v-chk12" style="display: none" type="checkbox"><label class="alectryon-input" for="understanding-specialize-tactic-v-chk12"><span class="kn">Example</span> <span class="nf">specialize</span> {<span class="nv">A</span> <span class="nv">B</span>: <span class="kt">Type</span>} (<span class="nv">H</span>: A -&gt; B) (<span class="nv">a</span>: A): B.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">B</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="understanding-specialize-tactic-v-chk13" style="display: none" type="checkbox"><label class="alectryon-input" for="understanding-specialize-tactic-v-chk13"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">B</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="understanding-specialize-tactic-v-chk14" style="display: none" type="checkbox"><label class="alectryon-input" for="understanding-specialize-tactic-v-chk14"><span class="nb">specialize</span> (H a).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">B</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> H.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><p>we initially have the hypothesis <tt class="docutils literal">H: A <span class="pre">-&gt;</span> B</tt>. When we call
<tt class="docutils literal">specialize (H a)</tt>, we apply <tt class="docutils literal">H</tt> to <tt class="docutils literal">a</tt> (apply as in function
application). This gives us something of type <tt class="docutils literal">B</tt>. <tt class="docutils literal">specialize</tt>
then gets rid of the old <tt class="docutils literal">H</tt> for us and replaces it with the result
of the application. It gives the new hypothesis the same name: <tt class="docutils literal">H</tt>.</p>
<p>In your case, we have <tt class="docutils literal">H2: 1 = 1 <span class="pre">-&gt;</span> False</tt>, which is a function from
the type <tt class="docutils literal">1 = 1</tt> to the type <tt class="docutils literal">False</tt>. That means that <tt class="docutils literal">H2</tt>
applied to <tt class="docutils literal">eq_refl</tt> is of type <tt class="docutils literal">False</tt>, i.e. <tt class="docutils literal">H2 eq_refl:
False</tt>. When we use the tactic <tt class="docutils literal">specialize (H2 eq_refl).</tt>, the old
<tt class="docutils literal">H2</tt> is cleared and replaced by a new term (<tt class="docutils literal">H2 eq_refl</tt>) whose
type is <tt class="docutils literal">False</tt>. It keeps the old name <tt class="docutils literal">H2</tt>, though.</p>
<p><tt class="docutils literal">specialize</tt> is useful when you're sure that you're only going to
use a hypothesis once, since it automatically gets rid of the old
hypothesis. One disadvantage is that the old name may not fit the
meaning of the new hypothesis. However, in your case and in my
example, <tt class="docutils literal">H</tt> is a generic enough name that it works either way.</p>
<hr class="docutils" />
<p>To your update...</p>
<p><tt class="docutils literal">specialize</tt> is a core tactic defined directly in the ltac plugin.
It doesn't use any other tactic internally, since it is its internals.</p>
<p>If you want to keep a hypothesis, you can use the <tt class="docutils literal">as</tt> modifier,
which works for both <tt class="docutils literal">specialize</tt> and <tt class="docutils literal">apply</tt>. In the proof</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="understanding-specialize-tactic-v-chk15" style="display: none" type="checkbox"><label class="alectryon-input" for="understanding-specialize-tactic-v-chk15"><span class="kn">Example</span> <span class="nf">specialize</span> {<span class="nv">A</span> <span class="nv">B</span>: <span class="kt">Type</span>} (<span class="nv">H</span>: A -&gt; B) (<span class="nv">a</span>: A): B.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">B</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="understanding-specialize-tactic-v-chk16" style="display: none" type="checkbox"><label class="alectryon-input" for="understanding-specialize-tactic-v-chk16"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">B</div></blockquote></div></div></small></span></pre><p>if you do <tt class="docutils literal">specialize (H a) as H0.</tt>, instead of clearing <tt class="docutils literal">H</tt>,
it'll introduce a new hypothesis <tt class="docutils literal">H0: B</tt>. <tt class="docutils literal">apply H in a as H0.</tt>
has the same effect.</p>
</div>
</div>
</div>
</div></body>
</html>
