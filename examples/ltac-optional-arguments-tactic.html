<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" class="alectryon-standalone" xml:lang="en" lang="en">
<head>
<meta charset="utf-8" />
<meta name="generator" content="Docutils 0.21.2: https://docutils.sourceforge.io/" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ltac: optional arguments tactic</title>
<link rel="stylesheet" href="alectryon.css" type="text/css" />
<link rel="stylesheet" href="docutils_basic.css" type="text/css" />
<link rel="stylesheet" href="pygments.css" type="text/css" />
<script type="text/javascript" src="alectryon.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" />
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class="alectryon-root alectryon-centered"><main id="ltac-optional-arguments-tactic">
<h1 class="title">Ltac: optional arguments tactic</h1>
<dl class="docinfo simple">
<dt class="link">Link<span class="colon">:</span></dt>
<dd class="link"><p><a class="reference external" href="https://stackoverflow.com/q/44840624">https://stackoverflow.com/q/44840624</a></p>
</dd>
</dl>
<input type="checkbox" class="alectryon-toggle" id="alectryon-toggle-0" /><label for="alectryon-toggle-0" class="alectryon-toggle-label">Display all goals and responses</label><div class="alectryon-container docutils container">
<section id="question">
<h2>Question</h2>
<p>I want to make a Ltac tactic in coq which would take either 1 or 3
arguments. I have read about <span class="docutils literal">ltac_No_arg</span> in the <a class="reference external" href="http://gallium.inria.fr/~fpottier/ssphs/LibTactics.html">LibTactics</a> module
but if I understood it correctly I would have to invoke my tactic
with:</p>
<pre class="code coq literal-block"><code><span class="n">mytactic</span> <span class="n">arg_1</span> <span class="n">ltac_no_arg</span> <span class="n">ltac_no_arg</span><span class="o">.</span></code></pre>
<p>which is not very convenient.</p>
<p>Is there any way to get a result like this:</p>
<pre class="code coq literal-block"><code><span class="n">mytactic</span> <span class="n">arg_1</span><span class="o">.</span>
<span class="n">mytactic</span> <span class="n">arg_1</span> <span class="n">arg_2</span> <span class="n">arg_3</span><span class="o">.</span></code></pre>
</section>
<section id="answer">
<h2>Answer</h2>
<p>We can use the <a class="reference external" href="https://coq.inria.fr/refman/user-extensions/syntax-extensions.html#coq:cmd.tactic-notation">Tactic Notation</a>
mechanism to try to solve your issue because it can handle variadic
arguments.</p>
<p>Let's reuse <span class="docutils literal">ltac_No_arg</span> and define a dummy tactic <span class="docutils literal">mytactic</span> for
the purposes of demonstration</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Inductive</span> <span class="nf">ltac_No_arg</span> : <span class="kt">Set</span> :=
| ltac_no_arg : ltac_No_arg.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Ltac</span> <span class="nf">mytactic</span> x y z :=
  <span class="kr">match</span> <span class="kp">type of</span> y <span class="kr">with</span>
  | ltac_No_arg =&gt; <span class="kp">idtac</span> <span class="s2">&quot;x =&quot;</span> x <span class="c">(* a bunch of cases omitted *)</span>
  | _ =&gt; <span class="kp">idtac</span> <span class="s2">&quot;x =&quot;</span> x <span class="s2">&quot;; y =&quot;</span> y <span class="s2">&quot;; z =&quot;</span> z
  <span class="kr">end</span>.</span></span></pre><p>Now let's define the aforementioned tactic notations:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Tactic Notation</span> <span class="s2">&quot;mytactic_notation&quot;</span> <span class="kp">constr</span>(x) :=
  mytactic x ltac_no_arg ltac_no_arg.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Tactic Notation</span> <span class="s2">&quot;mytactic_notation&quot;</span> <span class="kp">constr</span>(x) <span class="kp">constr</span>(y) <span class="kp">constr</span>(z) :=
  mytactic x y z.</span></span></pre><p>Tests:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="ltac-optional-arguments-tactic-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="ltac-optional-arguments-tactic-v-chk0"><span class="kn">Goal</span> <span class="kt">True</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">True</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ltac-optional-arguments-tactic-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="ltac-optional-arguments-tactic-v-chk1">mytactic_notation <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">x = <span class="mi">1</span></blockquote></div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">True</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ltac-optional-arguments-tactic-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="ltac-optional-arguments-tactic-v-chk2">mytactic_notation <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span>.</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">x = <span class="mi">1</span> ; y = <span class="mi">2</span> ; z = <span class="mi">3</span></blockquote></div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">True</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Abort</span>.</span></span></pre></section>
</div>
</main>
</div></body>
</html>
