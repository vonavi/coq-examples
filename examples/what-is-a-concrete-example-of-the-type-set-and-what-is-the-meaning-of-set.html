<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" class="alectryon-standalone" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.18: http://docutils.sourceforge.net/" />
<title>What is a concrete example of the type Set and what is the meaning of Set?</title>
<link rel="stylesheet" href="alectryon.css" type="text/css" />
<link rel="stylesheet" href="docutils_basic.css" type="text/css" />
<link rel="stylesheet" href="pygments.css" type="text/css" />
<script type="text/javascript" src="alectryon.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" />
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class="alectryon-root alectryon-centered"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Coq+SerAPI v8.13.0+0.13.0. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus. On Mac, use <kbd>‚åò</kbd> instead of <kbd>Ctrl</kbd>.</div><div class="document" id="what-is-a-concrete-example-of-the-type-set-and-what-is-the-meaning-of-set">
<h1 class="title">What is a concrete example of the type <code class="highlight coq"><span class="kt">Set</span></code> and what is the meaning of <code class="highlight coq"><span class="kt">Set</span></code>?</h1>

<p><a class="reference external" href="https://stackoverflow.com/questions/68056978/what-is-a-concrete-example-of-the-type-set-and-what-is-the-meaning-of-set">https://stackoverflow.com/questions/68056978/what-is-a-concrete-example-of-the-type-set-and-what-is-the-meaning-of-set</a></p>
<div class="section" id="question">
<h1>Question</h1>
<p>I've been trying to understand what <code class="highlight coq"><span class="kt">Set</span></code> is after encountering it in
Adam Chlipala's book in addition to <a class="reference external" href="https://stackoverflow.com/questions/39601502/what-exactly-is-a-set-in-coq">this great discussion in SO</a>.
His first example definition binary ops using <code class="highlight coq"><span class="kt">Set</span></code>:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Inductive</span> <span class="nf">binop</span> : <span class="kt">Set</span> := Plus | Times.</span></span></pre><p>in that book he says:</p>
<blockquote>
Second, there is the : Set fragment, which declares that we are
defining a datatype that should be thought of as a constituent of
programs.</blockquote>
<p>Which confuses me. What does Adam mean here?</p>
<p>In addition, I thought that some additional concrete examples would
help my understanding. I am not an expert of Coq so I am not sure what
type of examples would help but something simple and very
concrete/grounded might be useful.</p>
<p>Note, I have seen that <code class="highlight coq"><span class="kt">Set</span></code> is the first &quot;type set&quot; in a the type
hierarchy e.g. <code class="highlight coq"><span class="kt">Set</span> <span class="o">=</span> <span class="kt">Type</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">&lt;=</span> <span class="kt">Type</span> <span class="o">=</span> <span class="kt">Type</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">&lt;=</span> <span class="kt">Type</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span> <span class="o">&lt;=</span> <span class="o">...</span></code>. I
guess this sort of makes sense intuitively like I'd assume <code class="highlight coq"><span class="n">nat</span> <span class="o">\</span><span class="kr">in</span>
<span class="kt">Type</span></code> and all usual programming types to be in it but not sure what
would be in <code class="highlight coq"><span class="kt">Type</span></code> that wouldn't be in <code class="highlight coq"><span class="kt">Set</span></code>. Perhaps recursive types?
Not sure if that is the right example but I am trying to wrap my head
around what this concept means and it's conceptual (&amp; practical)
usefulness.</p>
</div>
<div class="section" id="answer">
<h1>Answer</h1>
<p>Though <code class="highlight coq"><span class="kt">Set</span></code> and <code class="highlight coq"><span class="kt">Type</span></code> are different in Coq, this is mostly due to
historical reasons. Nowadays, most developments do not rely on <code class="highlight coq"><span class="kt">Set</span></code>
being different from <code class="highlight coq"><span class="kt">Type</span></code>. In particular, Adam's comment would also
make sense if you replace <code class="highlight coq"><span class="kt">Set</span></code> by <code class="highlight coq"><span class="kt">Type</span></code> everywhere. The main point
is that, when you want to define a datatype that you can compute with
during execution (e.g. a number), you want to put it in <code class="highlight coq"><span class="kt">Set</span></code> or
<code class="highlight coq"><span class="kt">Type</span></code> <em>rather than</em> <code class="highlight coq"><span class="kt">Prop</span></code>. This is because things that live in
<code class="highlight coq"><span class="kt">Prop</span></code> are erased when you extract programs from Coq, so something
defined in <code class="highlight coq"><span class="kt">Prop</span></code> would end up not computing anything.</p>
<p>As for your second question: <code class="highlight coq"><span class="kt">Set</span></code> is something that lives in <code class="highlight coq"><span class="kt">Type</span></code>,
but not in <code class="highlight coq"><span class="kt">Set</span></code>, as the following snippet shows.</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="what-is-a-concrete-example-of-the-type-set-and-what-is-the-meaning-of-set-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="what-is-a-concrete-example-of-the-type-set-and-what-is-the-meaning-of-set-v-chk0"><span class="kn">Check</span> <span class="kt">Set</span> : <span class="kt">Type</span>. <span class="c">(* This works *)</span></label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message"><span class="kt">Set</span> : <span class="kt">Type</span>
     : <span class="kt">Type</span></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="what-is-a-concrete-example-of-the-type-set-and-what-is-the-meaning-of-set-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="what-is-a-concrete-example-of-the-type-set-and-what-is-the-meaning-of-set-v-chk1"><span class="kn">Fail</span> <span class="kn">Check</span> <span class="kt">Set</span> : <span class="kt">Set</span>.</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">The command has indeed failed <span class="kr">with</span> message:
The term <span class="s2">&quot;Set&quot;</span> has type <span class="s2">&quot;Type&quot;</span>
while it <span class="kr">is</span> expected to <span class="nb">have</span> type <span class="s2">&quot;Set&quot;</span>
(universe inconsistency: Cannot enforce <span class="kt">Set</span>+<span class="mi">1</span> &lt;= <span class="kt">Set</span>).</blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="c">(* The command has indeed failed with message: *)</span>
<span class="c">(* The term &quot;Set&quot; has type &quot;Type&quot; while it is expected to have type  *)</span>
<span class="c">(* &quot;Set&quot; (universe inconsistency: Cannot enforce Set+1 &lt;= Set). *)</span></span></pre><p>This restriction is in place to prevent paradoxes in the theory. This
is pretty much the only difference you see between <code class="highlight coq"><span class="kt">Set</span></code> and <code class="highlight coq"><span class="kt">Type</span></code> by
default. You can also make them more different by invoking Coq with
the <code class="highlight coq"><span class="o">-</span><span class="n">impredicative</span><span class="o">-</span><span class="nb">set</span></code> option:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp"><span class="c">(* Needs -impredicative-set; otherwise, the first line will also fail.*)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="what-is-a-concrete-example-of-the-type-set-and-what-is-the-meaning-of-set-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="what-is-a-concrete-example-of-the-type-set-and-what-is-the-meaning-of-set-v-chk2"><span class="kn">Fail</span> <span class="kn">Check</span> (<span class="kr">forall</span> <span class="nv">A</span> : <span class="kt">Set</span>, A -&gt; A) : <span class="kt">Set</span>.</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">The command has indeed failed <span class="kr">with</span> message:
The term <span class="s2">&quot;forall A : Set, A -&gt; A&quot;</span> has type <span class="s2">&quot;Type&quot;</span>
while it <span class="kr">is</span> expected to <span class="nb">have</span> type <span class="s2">&quot;Set&quot;</span>
(universe inconsistency: Cannot enforce <span class="kt">Set</span>+<span class="mi">1</span> &lt;= <span class="kt">Set</span>).</blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Universe</span> <span class="nf">u</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="what-is-a-concrete-example-of-the-type-set-and-what-is-the-meaning-of-set-v-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="what-is-a-concrete-example-of-the-type-set-and-what-is-the-meaning-of-set-v-chk3"><span class="kn">Fail</span> <span class="kn">Check</span> (<span class="kr">forall</span> <span class="nv">A</span> : <span class="kt">Type</span>@{u}, A -&gt; A) : <span class="kt">Type</span>@{u}.</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">The command has indeed failed <span class="kr">with</span> message:
The term <span class="s2">&quot;forall A : Type, A -&gt; A&quot;</span> has type
 <span class="s2">&quot;Type@{u+1}&quot;</span> while it <span class="kr">is</span> expected to <span class="nb">have</span> type
 <span class="s2">&quot;Type@{u}&quot;</span> (universe inconsistency: Cannot enforce u
&lt; u because u = u).</blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="c">(* The command has indeed failed with message: *)</span>
<span class="c">(* The term &quot;forall A : Type, A -&gt; A&quot; has type &quot;Type@{u+1}&quot; *)</span>
<span class="c">(* while it is expected to have type &quot;Type@{u}&quot; (universe inconsistency: Cannot enforce *)</span>
<span class="c">(* u &lt; u because u = u). *)</span></span></pre><p>Note that I had to add the <code class="highlight coq"><span class="kn">Universe</span> <span class="nf">u</span></code>. declaration to force the two
occurrences of <code class="highlight coq"><span class="kt">Type</span></code> to be at the same level. Without this
declaration, Coq would silently put the two <code class="highlight coq"><span class="kt">Type</span></code>'s at different
universe levels, and the command would be accepted. (This would not
mean that <code class="highlight coq"><span class="kt">Type</span></code> would have the same behavior as <code class="highlight coq"><span class="kt">Set</span></code> in this
example, since <code class="highlight coq"><span class="kt">Type</span><span class="o">&#64;{</span><span class="n">u</span><span class="o">}</span></code> and <code class="highlight coq"><span class="kt">Type</span><span class="o">&#64;{</span><span class="n">v</span><span class="o">}</span></code> are different things when <code class="highlight coq"><span class="n">u</span></code>
and <code class="highlight coq"><span class="n">v</span></code> are different!)</p>
<p>If you're wondering why this feature is useful, it is not by chance.
The overwhelming majority of Coq developments does not rely on it. It
is turned off by default because it is incompatible with a few axioms
that are generally considered more useful in Coq developments, such as
the strong law of the excluded middle:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Axiom</span> <span class="nv">excluded_middle</span> : <span class="kr">forall</span> <span class="nv">A</span> : <span class="kt">Prop</span>, {A} + {~ A}.</span></span></pre><p>With <code class="highlight coq"><span class="o">-</span><span class="n">impredicative</span><span class="o">-</span><span class="nb">set</span></code> turned on, this axiom yields a paradox,
while it is safe to use by default.</p>
</div>
</div>
</div></body>
</html>
