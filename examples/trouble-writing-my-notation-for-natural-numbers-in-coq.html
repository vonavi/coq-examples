<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" class="alectryon-standalone" xml:lang="en" lang="en">
<head>
<meta charset="utf-8" />
<meta name="generator" content="Docutils 0.21.2: https://docutils.sourceforge.io/" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Trouble writing my notation for natural numbers in Coq</title>
<link rel="stylesheet" href="alectryon.css" type="text/css" />
<link rel="stylesheet" href="docutils_basic.css" type="text/css" />
<link rel="stylesheet" href="pygments.css" type="text/css" />
<script type="text/javascript" src="alectryon.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" />
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class="alectryon-root alectryon-centered"><main id="trouble-writing-my-notation-for-natural-numbers-in-coq">
<h1 class="title">Trouble writing my notation for natural numbers in Coq</h1>
<dl class="docinfo simple">
<dt class="link">Link<span class="colon">:</span></dt>
<dd class="link"><p><a class="reference external" href="https://stackoverflow.com/q/11714415">https://stackoverflow.com/q/11714415</a></p>
</dd>
</dl>
<input type="checkbox" class="alectryon-toggle" id="alectryon-toggle-0" /><label for="alectryon-toggle-0" class="alectryon-toggle-label">Display all goals and responses</label><div class="alectryon-container docutils container">
<section id="question">
<h2>Question</h2>
<p>Why does Coq not accept this?</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="trouble-writing-my-notation-for-natural-numbers-in-coq-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input alectryon-failed" for="trouble-writing-my-notation-for-natural-numbers-in-coq-v-chk0"><span class="kn">Notation</span> <span class="s2">&quot;[ d1 , .. , d2 ]&quot;</span> := (addition (multiply ( .. d1 .. ) ten) d2).</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">Cannot find <span class="kn">where</span> the recursive <span class="nb">pattern</span> starts.</blockquote></div></div></small></span></pre></section>
<section id="answer">
<h2>Answer</h2>
<p><a class="reference external" href="http://coq.inria.fr/doc/Reference-Manual015.html#RecursiveNotations">Recursive notations</a>
need to obey fairly strict rules. The pattern to repeat must appear
twice (that's how Coq knows what is to be repeated): once using <span class="docutils literal">d2</span>
around the hole, and once using <span class="docutils literal">d1</span> around a <em>terminating
expression</em>. You've only used your pattern once, using <span class="docutils literal">d2</span> around
the hole. You need another iteration, around some <span class="docutils literal">zero</span> (like
<span class="docutils literal">nil</span> in the notation for lists).</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Notation</span> <span class="s2">&quot;[ d1 , .. , d2 ]&quot;</span> :=
  (addition (multiply .. (addition (multiply zero ten) d1) .. ten) d2).</span></span></pre><p>If you don't wish to introduce a zero, you can require at least two
digits inside the brackets (instead of just one as above), and use
that as the terminating expression. This is like the notation for
pairs (in <span class="docutils literal">Init/Notations.v</span>, also presented in the manual). You
could complement this with a notation for <span class="docutils literal">[d0]</span> with lower
priority, but as this is just <span class="docutils literal">d0</span> there isn't much point.</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Notation</span> <span class="s2">&quot;[ d0 , d1 , .. , d2 ]&quot;</span> :=
  (addition (multiply .. (addition (multiply d0 ten) d1) .. ten) d2).</span></span></pre></section>
</div>
</main>
</div></body>
</html>
