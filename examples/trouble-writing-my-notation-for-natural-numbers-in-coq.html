<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" class="alectryon-standalone" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.20.1: https://docutils.sourceforge.io/" />
<title>Trouble writing my notation for natural numbers in Coq</title>
<link rel="stylesheet" href="alectryon.css" type="text/css" />
<link rel="stylesheet" href="docutils_basic.css" type="text/css" />
<link rel="stylesheet" href="pygments.css" type="text/css" />
<script type="text/javascript" src="alectryon.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" />
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class="alectryon-root alectryon-centered"><div class="document" id="trouble-writing-my-notation-for-natural-numbers-in-coq">
<h1 class="title">Trouble writing my notation for natural numbers in Coq</h1>
<table class="docinfo" frame="void" rules="none">
<col class="docinfo-name" />
<col class="docinfo-content" />
<tbody valign="top">
<tr class="link field"><th class="docinfo-name">Link:</th><td class="field-body"><a class="reference external" href="https://stackoverflow.com/q/11714415">https://stackoverflow.com/q/11714415</a></td>
</tr>
</tbody>
</table>
<input type="checkbox" class="alectryon-toggle" id="alectryon-toggle-0" /><label for="alectryon-toggle-0" class="alectryon-toggle-label">Display all goals and responses</label><div class="alectryon-container docutils container">
<div class="section" id="question">
<h1>Question</h1>
<p>Why does Coq not accept this?</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="trouble-writing-my-notation-for-natural-numbers-in-coq-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input alectryon-failed" for="trouble-writing-my-notation-for-natural-numbers-in-coq-v-chk0"><span class="kn">Notation</span> <span class="s2">&quot;[ d1 , .. , d2 ]&quot;</span> := (addition (multiply ( .. d1 .. ) ten) d2).</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">Cannot find <span class="kn">where</span> the recursive <span class="nb">pattern</span> starts.</blockquote></div></div></small></span></pre></div>
<div class="section" id="answer">
<h1>Answer</h1>
<p><a class="reference external" href="http://coq.inria.fr/doc/Reference-Manual015.html#RecursiveNotations">Recursive notations</a>
need to obey fairly strict rules. The pattern to repeat must appear
twice (that's how Coq knows what is to be repeated): once using <tt class="docutils literal">d2</tt>
around the hole, and once using <tt class="docutils literal">d1</tt> around a <em>terminating
expression</em>. You've only used your pattern once, using <tt class="docutils literal">d2</tt> around
the hole. You need another iteration, around some <tt class="docutils literal">zero</tt> (like
<tt class="docutils literal">nil</tt> in the notation for lists).</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Notation</span> <span class="s2">&quot;[ d1 , .. , d2 ]&quot;</span> :=
  (addition (multiply .. (addition (multiply zero ten) d1) .. ten) d2).</span></span></pre><p>If you don't wish to introduce a zero, you can require at least two
digits inside the brackets (instead of just one as above), and use
that as the terminating expression. This is like the notation for
pairs (in <tt class="docutils literal">Init/Notations.v</tt>, also presented in the manual). You
could complement this with a notation for <tt class="docutils literal">[d0]</tt> with lower
priority, but as this is just <tt class="docutils literal">d0</tt> there isn't much point.</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Notation</span> <span class="s2">&quot;[ d0 , d1 , .. , d2 ]&quot;</span> :=
  (addition (multiply .. (addition (multiply d0 ten) d1) .. ten) d2).</span></span></pre></div>
</div>
</div>
</div></body>
</html>
