<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" class="alectryon-standalone" xml:lang="en" lang="en">
<head>
<meta charset="utf-8" />
<meta name="generator" content="Docutils 0.21.2: https://docutils.sourceforge.io/" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>How to return a (intro'd) hypothesis back to the goal formula?</title>
<link rel="stylesheet" href="alectryon.css" type="text/css" />
<link rel="stylesheet" href="docutils_basic.css" type="text/css" />
<link rel="stylesheet" href="pygments.css" type="text/css" />
<script type="text/javascript" src="alectryon.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" />
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class="alectryon-root alectryon-centered"><main id="how-to-return-a-intro-d-hypothesis-back-to-the-goal-formula">
<h1 class="title">How to return a (<span class="docutils literal">intro</span>'d) hypothesis back to the goal formula?</h1>
<dl class="docinfo simple">
<dt class="link">Link<span class="colon">:</span></dt>
<dd class="link"><p><a class="reference external" href="https://stackoverflow.com/q/32567436">https://stackoverflow.com/q/32567436</a></p>
</dd>
</dl>
<input type="checkbox" class="alectryon-toggle" id="alectryon-toggle-0" /><label for="alectryon-toggle-0" class="alectryon-toggle-label">Display all goals and responses</label><div class="alectryon-container docutils container">
<section id="question">
<h2>Question</h2>
<p>For the proof:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Parameters</span> <span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Prop</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-return-a-introd-hypothesis-back-to-the-goal-formula-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-return-a-introd-hypothesis-back-to-the-goal-formula-v-chk0"><span class="kn">Goal</span> A -&gt; B.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">A -&gt; B</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-return-a-introd-hypothesis-back-to-the-goal-formula-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-return-a-introd-hypothesis-back-to-the-goal-formula-v-chk1"><span class="nb">intro</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">B</div></blockquote></div></div></small></span></pre><p>I get:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="how-to-return-a-introd-hypothesis-back-to-the-goal-formula-v-chk2" style="display: none" type="checkbox"><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message"><span class="mi">1</span> subgoal

  H : A
  ============================
  B</blockquote></div></div></small></span></pre><p>How do I return then <span class="docutils literal">A</span> back to the goal section? To return to:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="how-to-return-a-introd-hypothesis-back-to-the-goal-formula-v-chk3" style="display: none" type="checkbox"><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message"><span class="mi">1</span> subgoal

  ============================
  A -&gt; B</blockquote></div></div></small></span></pre></section>
<section id="answer-arthur-azevedo-de-amorim">
<h2>Answer (Arthur Azevedo De Amorim)</h2>
<p>Use the <span class="docutils literal">revert</span> tactic:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-return-a-introd-hypothesis-back-to-the-goal-formula-v-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-return-a-introd-hypothesis-back-to-the-goal-formula-v-chk4"><span class="nb">revert</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">A -&gt; B</div></blockquote></div></div></small></span></pre><p>It is exactly the inverse of <span class="docutils literal">intro</span>, cf. <a class="reference external" href="https://coq.inria.fr/distrib/current/refman/Reference-Manual010.html#hevea_tactic39">the reference manual</a>.</p>
</section>
<section id="answer-konstantin-weitz">
<h2>Answer (Konstantin Weitz)</h2>
<p>You can use the <span class="docutils literal">revert</span> tactic.</p>
<p>Given Coq's plethora of tactics, each with various corner cases and
varying quality of documentation, it's quite common that you won't
know which tactic to use.</p>
<p>In such cases, I find it useful to think of your proof as a program
(see Curry-Howard Isomorphism) and to ask yourself what term you would
have to write to solve your goal. The advantages of this approach is
that Coq's term language is easier to learn (because there just aren't
that many different kinds of terms) and expressive enough to solve all
goals solvable with tactics (sometimes the proofs are more verbose
though).</p>
<p>You can use the <a class="reference external" href="https://coq.inria.fr/refman/Reference-Manual010.html#hevea_tactic7">refine</a>
tactic to write your proofs in the term language. The argument of
<span class="docutils literal">refine</span> is a term with holes <span class="docutils literal">_</span>. <span class="docutils literal">refine</span> discharges the
current goal using the term and generates a subgoal for every hole in
the term. Once you know how <span class="docutils literal">refine</span> works, all you have to do is to
come up with a term that does what you want. For example:</p>
<ul class="simple">
<li><p>revert a hypothesis <span class="docutils literal">h</span> with <span class="docutils literal">refine (_ h)</span>.</p></li>
<li><p>introduce a hypothesis <span class="docutils literal">h</span> with <span class="docutils literal">refine (fun h =&gt; _)</span>.</p></li>
<li><p>duplicate a hypothesis <span class="docutils literal">h</span> with <span class="docutils literal">refine ((fun h' =&gt; _) h)</span>.</p></li>
</ul>
<p>Note that Coq's tactics tend to do quite a bit of magic behind the
scenes. For example, the <span class="docutils literal">revert</span> tactic is &quot;smarter&quot; than the
<span class="docutils literal">refine</span> above when dealing with dependent variables:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-return-a-introd-hypothesis-back-to-the-goal-formula-v-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-return-a-introd-hypothesis-back-to-the-goal-formula-v-chk5"><span class="kn">Goal</span> <span class="kr">forall</span> <span class="nv">n</span> : nat, n &gt;= <span class="mi">0</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">n</span> : nat, n &gt;= <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-return-a-introd-hypothesis-back-to-the-goal-formula-v-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-return-a-introd-hypothesis-back-to-the-goal-formula-v-chk6"><span class="nb">intro</span> n.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n &gt;= <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="how-to-return-a-introd-hypothesis-back-to-the-goal-formula-v-chk7" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-return-a-introd-hypothesis-back-to-the-goal-formula-v-chk7"><span class="nb">revert</span> n.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">n</span> : nat, n &gt;= <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-return-a-introd-hypothesis-back-to-the-goal-formula-v-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-return-a-introd-hypothesis-back-to-the-goal-formula-v-chk8"><span class="kn">Restart</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">n</span> : nat, n &gt;= <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-return-a-introd-hypothesis-back-to-the-goal-formula-v-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-return-a-introd-hypothesis-back-to-the-goal-formula-v-chk9"><span class="nb">intro</span> n.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n &gt;= <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="how-to-return-a-introd-hypothesis-back-to-the-goal-formula-v-chka" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-return-a-introd-hypothesis-back-to-the-goal-formula-v-chka"><span class="nb">refine</span> (_ n).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> : nat, x &gt;= <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-return-a-introd-hypothesis-back-to-the-goal-formula-v-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-return-a-introd-hypothesis-back-to-the-goal-formula-v-chkb"><span class="kn">Restart</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">n</span> : nat, n &gt;= <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-return-a-introd-hypothesis-back-to-the-goal-formula-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-return-a-introd-hypothesis-back-to-the-goal-formula-v-chkc"><span class="nb">intro</span> n&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n'</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n&#39; &gt;= <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="how-to-return-a-introd-hypothesis-back-to-the-goal-formula-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-return-a-introd-hypothesis-back-to-the-goal-formula-v-chkd"><span class="nb">refine</span> ((_ : <span class="kr">forall</span> <span class="nv">n</span>, n &gt;= <span class="mi">0</span>) n&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n'</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">n</span> : nat, n &gt;= <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Abort</span>.</span></span></pre></section>
</div>
</main>
</div></body>
</html>
