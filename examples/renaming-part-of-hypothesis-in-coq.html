<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" class="alectryon-standalone" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<title>renaming part of hypothesis in Coq</title>
<link rel="stylesheet" href="alectryon.css" type="text/css" />
<link rel="stylesheet" href="docutils_basic.css" type="text/css" />
<link rel="stylesheet" href="pygments.css" type="text/css" />
<script type="text/javascript" src="alectryon.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" />
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class="alectryon-root alectryon-centered"><div class="document" id="renaming-part-of-hypothesis-in-coq">
<h1 class="title">renaming part of hypothesis in Coq</h1>
<table class="docinfo" frame="void" rules="none">
<col class="docinfo-name" />
<col class="docinfo-content" />
<tbody valign="top">
<tr class="link field"><th class="docinfo-name">Link:</th><td class="field-body"><a class="reference external" href="https://stackoverflow.com/q/52350119">https://stackoverflow.com/q/52350119</a></td>
</tr>
</tbody>
</table>
<input type="checkbox" class="alectryon-toggle" id="alectryon-toggle-0" /><label for="alectryon-toggle-0" class="alectryon-toggle-label">Display all goals and responses</label><div class="alectryon-container docutils container">
<div class="section" id="question">
<h1>Question</h1>
<p>After destructing <tt class="docutils literal">n</tt> in my proof, I am stuck at the following:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="renaming-part-of-hypothesis-in-coq-v-chk0" style="display: none" type="checkbox"><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message"><span class="mi">1</span> subgoal

  n : nat
  X : <span class="kt">Type</span>
  h : nat
  t : list nat
  IHl : length t = n -&gt; nth_error t n = None
  n&#39; : nat
  E : n = S n&#39;
  H&#39; : length t = n&#39;
  ============================
  nth_error t n&#39; = None</blockquote></div></div></small></span></pre><p>I want to rewrite using <tt class="docutils literal">IHl</tt>, but that is not possible. How do I
compose <tt class="docutils literal">IHl</tt> and <tt class="docutils literal">H'</tt> to make sense and prove this theorem?</p>
</div>
<div class="section" id="answer-yves">
<h1>Answer (Yves)</h1>
<p>I am just trying to elaborate on &#64;Arthur answer.</p>
<p>I was able to reproduce your goal with the following script:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> List.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="renaming-part-of-hypothesis-in-coq-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="renaming-part-of-hypothesis-in-coq-v-chk1"><span class="kn">Lemma</span> <span class="nf">toto</span> (<span class="nv">n</span> : nat) (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">l</span> : list nat) :
  length l = n -&gt; nth_error l n = None.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length l = n -&gt; nth_error l n = None</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="renaming-part-of-hypothesis-in-coq-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="renaming-part-of-hypothesis-in-coq-v-chk2"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length l = n -&gt; nth_error l n = None</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="renaming-part-of-hypothesis-in-coq-v-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="renaming-part-of-hypothesis-in-coq-v-chk3"><span class="nb">induction</span> l <span class="kr">as</span> [ | h t IHl].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length nil = n -&gt; nth_error nil n = None</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="renaming-part-of-hypothesis-in-coq-v-chk4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>list nat</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length t = n -&gt; nth_error t n = None</span></span></span><br></div><label class="goal-separator" for="renaming-part-of-hypothesis-in-coq-v-chk4"><hr></label><div class="goal-conclusion">length (h :: t) = n -&gt; nth_error (h :: t) n = None</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="renaming-part-of-hypothesis-in-coq-v-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="renaming-part-of-hypothesis-in-coq-v-chk5">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length nil = n -&gt; nth_error nil n = None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="renaming-part-of-hypothesis-in-coq-v-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="renaming-part-of-hypothesis-in-coq-v-chk6"><span class="nb">case_eq</span> n.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n = <span class="mi">0</span> -&gt; length nil = <span class="mi">0</span> -&gt; nth_error nil <span class="mi">0</span> = None</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="renaming-part-of-hypothesis-in-coq-v-chk7" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><label class="goal-separator" for="renaming-part-of-hypothesis-in-coq-v-chk7"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">n0</span> : nat,
n = S n0 -&gt;
length nil = S n0 -&gt; nth_error nil (S n0) = None</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="renaming-part-of-hypothesis-in-coq-v-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="renaming-part-of-hypothesis-in-coq-v-chk8">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n = <span class="mi">0</span> -&gt; length nil = <span class="mi">0</span> -&gt; nth_error nil <span class="mi">0</span> = None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="renaming-part-of-hypothesis-in-coq-v-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="renaming-part-of-hypothesis-in-coq-v-chk9"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n = <span class="mi">0</span> -&gt; <span class="mi">0</span> = <span class="mi">0</span> -&gt; None = None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="renaming-part-of-hypothesis-in-coq-v-chka" style="display: none" type="checkbox"><label class="alectryon-input" for="renaming-part-of-hypothesis-in-coq-v-chka">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">n0</span> : nat,
n = S n0 -&gt;
length nil = S n0 -&gt; nth_error nil (S n0) = None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="renaming-part-of-hypothesis-in-coq-v-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="renaming-part-of-hypothesis-in-coq-v-chkb"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">n0</span> : nat, n = S n0 -&gt; <span class="mi">0</span> = S n0 -&gt; None = None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">discriminate</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="renaming-part-of-hypothesis-in-coq-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="renaming-part-of-hypothesis-in-coq-v-chkc">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>list nat</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length t = n -&gt; nth_error t n = None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (h :: t) = n -&gt; nth_error (h :: t) n = None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="renaming-part-of-hypothesis-in-coq-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="renaming-part-of-hypothesis-in-coq-v-chkd"><span class="nb">case_eq</span> n.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>list nat</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length t = n -&gt; nth_error t n = None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n = <span class="mi">0</span> -&gt;
length (h :: t) = <span class="mi">0</span> -&gt; nth_error (h :: t) <span class="mi">0</span> = None</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="renaming-part-of-hypothesis-in-coq-v-chke" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>list nat</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length t = n -&gt; nth_error t n = None</span></span></span><br></div><label class="goal-separator" for="renaming-part-of-hypothesis-in-coq-v-chke"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">n0</span> : nat,
n = S n0 -&gt;
length (h :: t) = S n0 -&gt;
nth_error (h :: t) (S n0) = None</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="renaming-part-of-hypothesis-in-coq-v-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="renaming-part-of-hypothesis-in-coq-v-chkf">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>list nat</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length t = n -&gt; nth_error t n = None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n = <span class="mi">0</span> -&gt;
length (h :: t) = <span class="mi">0</span> -&gt; nth_error (h :: t) <span class="mi">0</span> = None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="renaming-part-of-hypothesis-in-coq-v-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="renaming-part-of-hypothesis-in-coq-v-chk10"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>list nat</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length t = n -&gt; nth_error t n = None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n = <span class="mi">0</span> -&gt; S (length t) = <span class="mi">0</span> -&gt; Some h = None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">discriminate</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="renaming-part-of-hypothesis-in-coq-v-chk11" style="display: none" type="checkbox"><label class="alectryon-input" for="renaming-part-of-hypothesis-in-coq-v-chk11">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>list nat</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length t = n -&gt; nth_error t n = None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">n0</span> : nat,
n = S n0 -&gt;
length (h :: t) = S n0 -&gt;
nth_error (h :: t) (S n0) = None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="renaming-part-of-hypothesis-in-coq-v-chk12" style="display: none" type="checkbox"><label class="alectryon-input" for="renaming-part-of-hypothesis-in-coq-v-chk12"><span class="nb">intros</span> n&#39; E.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>list nat</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length t = n -&gt; nth_error t n = None</span></span></span><br><span><var>n'</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>E</var><span class="hyp-type"><b>: </b><span>n = S n&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (h :: t) = S n&#39; -&gt;
nth_error (h :: t) (S n&#39;) = None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="renaming-part-of-hypothesis-in-coq-v-chk13" style="display: none" type="checkbox"><label class="alectryon-input" for="renaming-part-of-hypothesis-in-coq-v-chk13"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>list nat</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length t = n -&gt; nth_error t n = None</span></span></span><br><span><var>n'</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>E</var><span class="hyp-type"><b>: </b><span>n = S n&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">S (length t) = S n&#39; -&gt; nth_error t n&#39; = None</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="renaming-part-of-hypothesis-in-coq-v-chk14" style="display: none" type="checkbox"><label class="alectryon-input" for="renaming-part-of-hypothesis-in-coq-v-chk14"><span class="nb">intros</span> E&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>list nat</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length t = n -&gt; nth_error t n = None</span></span></span><br><span><var>n'</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>E</var><span class="hyp-type"><b>: </b><span>n = S n&#39;</span></span></span><br><span><var>E'</var><span class="hyp-type"><b>: </b><span>S (length t) = S n&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">nth_error t n&#39; = None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="renaming-part-of-hypothesis-in-coq-v-chk15" style="display: none" type="checkbox"><label class="alectryon-input" for="renaming-part-of-hypothesis-in-coq-v-chk15"><span class="nb">injection</span> E&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>list nat</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length t = n -&gt; nth_error t n = None</span></span></span><br><span><var>n'</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>E</var><span class="hyp-type"><b>: </b><span>n = S n&#39;</span></span></span><br><span><var>E'</var><span class="hyp-type"><b>: </b><span>S (length t) = S n&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length t = n&#39; -&gt; nth_error t n&#39; = None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="renaming-part-of-hypothesis-in-coq-v-chk16" style="display: none" type="checkbox"><label class="alectryon-input" for="renaming-part-of-hypothesis-in-coq-v-chk16"><span class="nb">clear</span> E&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>list nat</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length t = n -&gt; nth_error t n = None</span></span></span><br><span><var>n'</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>E</var><span class="hyp-type"><b>: </b><span>n = S n&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length t = n&#39; -&gt; nth_error t n&#39; = None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="renaming-part-of-hypothesis-in-coq-v-chk17" style="display: none" type="checkbox"><label class="alectryon-input" for="renaming-part-of-hypothesis-in-coq-v-chk17"><span class="nb">intros</span> H&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>list nat</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length t = n -&gt; nth_error t n = None</span></span></span><br><span><var>n'</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>E</var><span class="hyp-type"><b>: </b><span>n = S n&#39;</span></span></span><br><span><var>H'</var><span class="hyp-type"><b>: </b><span>length t = n&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">nth_error t n&#39; = None</div></blockquote></div></div></small></span></pre><p>and I agree that this goal cannot be proved. Now, if you instead start
your proof with the following text (the <tt class="docutils literal">Proof</tt> and <tt class="docutils literal">induction</tt>
lines have to be replaced), it will be provable (I checked).</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="renaming-part-of-hypothesis-in-coq-v-chk18" style="display: none" type="checkbox"><label class="alectryon-input" for="renaming-part-of-hypothesis-in-coq-v-chk18"><span class="kn">Restart</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length l = n -&gt; nth_error l n = None</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="renaming-part-of-hypothesis-in-coq-v-chk19" style="display: none" type="checkbox"><label class="alectryon-input" for="renaming-part-of-hypothesis-in-coq-v-chk19"><span class="nb">revert</span> n.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">n</span> : nat, length l = n -&gt; nth_error l n = None</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="renaming-part-of-hypothesis-in-coq-v-chk1a" style="display: none" type="checkbox"><label class="alectryon-input" for="renaming-part-of-hypothesis-in-coq-v-chk1a"><span class="nb">induction</span> l <span class="kr">as</span> [ | h t IHl]; <span class="nb">intros</span> n.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length nil = n -&gt; nth_error nil n = None</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="renaming-part-of-hypothesis-in-coq-v-chk1b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>list nat</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">n</span> : nat, length t = n -&gt; nth_error t n = None</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><label class="goal-separator" for="renaming-part-of-hypothesis-in-coq-v-chk1b"><hr></label><div class="goal-conclusion">length (h :: t) = n -&gt; nth_error (h :: t) n = None</div></blockquote></div></div></div></small></span></pre><p>The difference is that the induction hypothesis now has the following
statement.</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="renaming-part-of-hypothesis-in-coq-v-chk1c" style="display: none" type="checkbox"><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">IHl
     : <span class="kr">forall</span> <span class="nv">n</span> : nat,
       length t = n -&gt; nth_error t n = None</blockquote></div></div></small></span></pre><p>What happened? In the first (faulty) variant, you attempt to prove a
statement for all lists whose length is equal to a precise <tt class="docutils literal">n</tt>,
because <tt class="docutils literal">n</tt> is fixed before you start the proof by induction. In the
second (correct) variant, you attempt to prove a statement for all
lists <tt class="docutils literal">l</tt>, and this statement accepts any <tt class="docutils literal">n</tt> as long as <tt class="docutils literal">length
l = n</tt>.</p>
<p>In the first variant, <tt class="docutils literal">n</tt> is fixed and the equality <tt class="docutils literal">length l = n</tt>
restricts <tt class="docutils literal">l</tt> to be among those that have length precisely <tt class="docutils literal">n</tt>. In
the second case, <tt class="docutils literal">l</tt> is chosen first, and <tt class="docutils literal">n</tt> is not fixed, but
the equality <tt class="docutils literal">length l = n</tt> restricts <tt class="docutils literal">n</tt> to follow the length of
<tt class="docutils literal">l</tt>.</p>
<p>This is called &quot;loading the induction&quot; because the statement <tt class="docutils literal">forall
n, length l = n <span class="pre">-&gt;</span> nth_error l n = None</tt> is stronger (it is loaded)
than the statement that you attempt to prove in the first variant
(just for one specific <tt class="docutils literal">n</tt>), but surprisingly it is easier to prove.</p>
</div>
<div class="section" id="answer-arthur-azevedo-de-amorim">
<h1>Answer (Arthur Azevedo De Amorim)</h1>
<p>You cannot, because your induction hypothesis is not general enough.
Here is a statement that should be easier to prove:</p>
<pre class="code coq literal-block">
<span class="kr">forall</span> <span class="o">(</span><span class="nv">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="nv">t</span> <span class="o">:</span> <span class="n">list</span> <span class="n">X</span><span class="o">),</span> <span class="n">nth_error</span> <span class="n">t</span> <span class="o">(</span><span class="n">length</span> <span class="n">t</span><span class="o">)</span> <span class="o">=</span> <span class="n">None</span>
</pre>
</div>
</div>
</div>
</div></body>
</html>
