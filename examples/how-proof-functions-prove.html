<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" class="alectryon-standalone" xml:lang="en" lang="en">
<head>
<meta charset="utf-8" />
<meta name="generator" content="Docutils 0.21.2: https://docutils.sourceforge.io/" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>How proof functions prove?</title>
<link rel="stylesheet" href="alectryon.css" type="text/css" />
<link rel="stylesheet" href="docutils_basic.css" type="text/css" />
<link rel="stylesheet" href="pygments.css" type="text/css" />
<script type="text/javascript" src="alectryon.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" />
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class="alectryon-root alectryon-centered"><main id="how-proof-functions-prove">
<h1 class="title">How proof functions prove?</h1>
<dl class="docinfo simple">
<dt class="link">Link<span class="colon">:</span></dt>
<dd class="link"><p><a class="reference external" href="https://stackoverflow.com/q/61959394">https://stackoverflow.com/q/61959394</a></p>
</dd>
</dl>
<input type="checkbox" class="alectryon-toggle" id="alectryon-toggle-0" /><label for="alectryon-toggle-0" class="alectryon-toggle-label">Display all goals and responses</label><div class="alectryon-container docutils container">
<section id="question">
<h2>Question</h2>
<p>It'd help my understanding the 'programs/proofs' parallelism if
somebody was kind enough to explain me how the proof function is used
in the following simple case:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-proof-functions-prove-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="how-proof-functions-prove-v-chk0"><span class="kn">Theorem</span> <span class="nf">ex1</span> : <span class="kr">forall</span> <span class="nv">n</span> : nat, <span class="mi">7</span>*<span class="mi">5</span> &lt; n -&gt; <span class="mi">6</span>*<span class="mi">6</span> &lt;= n.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">n</span> : nat, <span class="mi">7</span> * <span class="mi">5</span> &lt; n -&gt; <span class="mi">6</span> * <span class="mi">6</span> &lt;= n</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-proof-functions-prove-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="how-proof-functions-prove-v-chk1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">n</span> : nat, <span class="mi">7</span> * <span class="mi">5</span> &lt; n -&gt; <span class="mi">6</span> * <span class="mi">6</span> &lt;= n</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-proof-functions-prove-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="how-proof-functions-prove-v-chk2"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="mi">7</span> * <span class="mi">5</span> &lt; n</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="mi">6</span> * <span class="mi">6</span> &lt;= n</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><p>The proof function:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="how-proof-functions-prove-v-chk3" style="display: none" type="checkbox"><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">ex1 = 
<span class="kr">fun</span> (<span class="nv">n</span> : nat) (<span class="nv">H</span> : <span class="mi">7</span> * <span class="mi">5</span> &lt; n) =&gt; H
     : <span class="kr">forall</span> <span class="nv">n</span> : nat, <span class="mi">7</span> * <span class="mi">5</span> &lt; n -&gt; <span class="mi">6</span> * <span class="mi">6</span> &lt;= n

<span class="kn">Arguments</span> ex1 _%nat_scope _</blockquote></div></div></small></span></pre><p>Is the proof function executed in the proof process? How its return
value is used? Is it correct to say that the return value of <span class="docutils literal">ex1</span>
is an instance of the type <span class="docutils literal">forall n : nat, 7 * 5 &lt; n <span class="pre">-&gt;</span> 6 * 6 &lt;= n</span>?</p>
</section>
<section id="answer">
<h2>Answer</h2>
<blockquote>
<p>Is it correct to say that the return value of <span class="docutils literal">ex1</span> is an
instance of the type <span class="docutils literal">forall n : nat, 7 * 5 &lt; n <span class="pre">-&gt;</span> 6 * 6 &lt;= n</span>?</p>
</blockquote>
<p>Not quite. It would be more correct to say that the return type of
<span class="docutils literal">ex1</span> is <span class="docutils literal">6 * 6 &lt;= n</span>, where <span class="docutils literal">n</span> is the first argument passed to
<span class="docutils literal">ex1</span>, or that <span class="docutils literal">ex1</span> has type <span class="docutils literal">forall n, 7 * 5 &lt; n <span class="pre">-&gt;</span> 6 * 6 &lt;= n</span>.</p>
<blockquote>
<p>Is the proof function executed in the proof process?</p>
</blockquote>
<p>Not necessarily. Execution here means &quot;simplification&quot; or
&quot;normalization&quot;. The term built by the proof is usually not
simplified. For example:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-proof-functions-prove-v-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="how-proof-functions-prove-v-chk4"><span class="kn">Theorem</span> <span class="nf">foo</span> : <span class="kt">True</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">True</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-proof-functions-prove-v-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="how-proof-functions-prove-v-chk5"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">True</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-proof-functions-prove-v-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="how-proof-functions-prove-v-chk6"><span class="nb">assert</span> (H : <span class="kt">True</span> -&gt; <span class="kt">True</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">True</span> -&gt; <span class="kt">True</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="how-proof-functions-prove-v-chk7" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kt">True</span> -&gt; <span class="kt">True</span></span></span></span><br></div><label class="goal-separator" for="how-proof-functions-prove-v-chk7"><hr></label><div class="goal-conclusion"><span class="kt">True</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-proof-functions-prove-v-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="how-proof-functions-prove-v-chk8">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">True</span> -&gt; <span class="kt">True</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-proof-functions-prove-v-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="how-proof-functions-prove-v-chk9"><span class="nb">intros</span> H&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H'</var><span class="hyp-type"><b>: </b><span><span class="kt">True</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">True</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> H&#39;.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-proof-functions-prove-v-chka" style="display: none" type="checkbox"><label class="alectryon-input" for="how-proof-functions-prove-v-chka">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kt">True</span> -&gt; <span class="kt">True</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">True</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-proof-functions-prove-v-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="how-proof-functions-prove-v-chkb"><span class="nb">apply</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kt">True</span> -&gt; <span class="kt">True</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">True</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> I. <span class="c">(* I is a proof of True *)</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="how-proof-functions-prove-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="how-proof-functions-prove-v-chkc"><span class="kn">Print</span> foo.</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">foo = 
<span class="kr">let</span> <span class="nv">H</span> : <span class="kt">True</span> -&gt; <span class="kt">True</span> := <span class="kr">fun</span> <span class="nv">H&#39;</span> : <span class="kt">True</span> =&gt; H&#39; <span class="kr">in</span> H I
     : <span class="kt">True</span></blockquote></div></div></small></span></pre><p>Simplifying this proof means replacing <span class="docutils literal">H</span> by <span class="docutils literal">fun H' : True =&gt; H'</span> and reducing the application, which yields <span class="docutils literal">I</span>. You can see
this by asking Coq to compute this term:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="how-proof-functions-prove-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="how-proof-functions-prove-v-chkd"><span class="kn">Compute</span> <span class="kr">let</span> <span class="nv">H</span> : <span class="kt">True</span> -&gt; <span class="kt">True</span> := <span class="kr">fun</span> <span class="nv">H&#39;</span> : <span class="kt">True</span> =&gt; H&#39; <span class="kr">in</span> H I.</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">= I
: <span class="kt">True</span></blockquote></div></div></small></span></pre><p><em>However</em>:</p>
<blockquote>
<p>How its return value is used?</p>
</blockquote>
<p>Every proof that you enter in Coq goes a type-checking step to ensure
it is correct. One of the things the type checker does is to simplify
terms when comparing their types. In Coq, two terms that compute to
the same normal form are considered equal. The term given in the
result, <span class="docutils literal">H</span>, was given type <span class="docutils literal">7 * 5 &lt; n</span>. But <span class="docutils literal">a &lt; b</span> is defined
as <span class="docutils literal">S a &lt;= b</span>; thus we can also view <span class="docutils literal">H</span> as having type <span class="docutils literal">S (7 * 5) &lt;= n</span>. Coq now needs to ensure that <span class="docutils literal">H</span> has type <span class="docutils literal">6 * 6 &lt;= n</span>,
which it does, because the two lower bounds compute to 36. Thus, there
is computation happening when you enter a proof in Coq, but the
computation is performed by the type-checker, not the proof term (even
though the proof term does have computational behavior).</p>
</section>
</div>
</main>
</div></body>
</html>
