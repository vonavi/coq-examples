<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" class="alectryon-standalone" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<title>How to prove that a number is prime using Znumtheory in Coq</title>
<link rel="stylesheet" href="alectryon.css" type="text/css" />
<link rel="stylesheet" href="docutils_basic.css" type="text/css" />
<link rel="stylesheet" href="pygments.css" type="text/css" />
<script type="text/javascript" src="alectryon.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" />
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class="alectryon-root alectryon-centered"><div class="document" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq">
<h1 class="title">How to prove that a number is prime using Znumtheory in Coq</h1>
<table class="docinfo" frame="void" rules="none">
<col class="docinfo-name" />
<col class="docinfo-content" />
<tbody valign="top">
<tr class="link field"><th class="docinfo-name">Link:</th><td class="field-body"><a class="reference external" href="https://stackoverflow.com/q/49282773">https://stackoverflow.com/q/49282773</a></td>
</tr>
</tbody>
</table>
<input type="checkbox" class="alectryon-toggle" id="alectryon-toggle-0" /><label for="alectryon-toggle-0" class="alectryon-toggle-label">Display all goals and responses</label><div class="alectryon-container docutils container">
<div class="section" id="question">
<h1>Question</h1>
<p>I'm trying to prove that a number is prime using the Znumtheory
library.</p>
<p>In Znumtheory primes are defined in terms of relative primes:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Inductive</span> <span class="nf">prime</span> (<span class="nv">p</span> : Z) : <span class="kt">Prop</span> :=
  prime_intro :
    <span class="mi">1</span> &lt; p -&gt; (<span class="kr">forall</span> <span class="nv">n</span> : Z, <span class="mi">1</span> &lt;= n &lt; p -&gt; rel_prime n p) -&gt; prime p.</span></span></pre><p>So to prove that <tt class="docutils literal">3</tt> is prime I should apply <tt class="docutils literal">prime_intro</tt> to the
goal. Here is my try:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> Lia.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk0"><span class="kn">Theorem</span> <span class="nf">prime3</span> : prime <span class="mi">3</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">prime <span class="mi">3</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">prime <span class="mi">3</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk2"><span class="nb">apply</span> prime_intro.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="mi">1</span> &lt; <span class="mi">3</span></div></blockquote><div class="alectryon-extra-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">n</span> : Z, <span class="mi">1</span> &lt;= n &lt; <span class="mi">3</span> -&gt; rel_prime n <span class="mi">3</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk3">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="mi">1</span> &lt; <span class="mi">3</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk4">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">n</span> : Z, <span class="mi">1</span> &lt;= n &lt; <span class="mi">3</span> -&gt; rel_prime n <span class="mi">3</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk5"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= n &lt; <span class="mi">3</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rel_prime n <span class="mi">3</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk6"><span class="nb">unfold</span> rel_prime.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= n &lt; <span class="mi">3</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Zis_gcd n <span class="mi">3</span> <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk7" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk7"><span class="nb">apply</span> Zis_gcd_intro.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= n &lt; <span class="mi">3</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="mi">1</span> | n)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk8" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= n &lt; <span class="mi">3</span></span></span></span><br></div><label class="goal-separator" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk8"><hr></label><div class="goal-conclusion">(<span class="mi">1</span> | <span class="mi">3</span>)</div></blockquote><input class="alectryon-extra-goal-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk9" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= n &lt; <span class="mi">3</span></span></span></span><br></div><label class="goal-separator" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk9"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> : Z, (x | n) -&gt; (x | <span class="mi">3</span>) -&gt; (x | <span class="mi">1</span>)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chka" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chka">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= n &lt; <span class="mi">3</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="mi">1</span> | n)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> Z.divide_1_l.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chkb">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= n &lt; <span class="mi">3</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="mi">1</span> | <span class="mi">3</span>)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> Z.divide_1_l.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chkc">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= n &lt; <span class="mi">3</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> : Z, (x | n) -&gt; (x | <span class="mi">3</span>) -&gt; (x | <span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chkd"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= n &lt; <span class="mi">3</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(x | n)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(x | <span class="mi">3</span>)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(x | <span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Abort</span>.</span></span></pre><p>I don't know how to use the hypothesis <tt class="docutils literal">H : 1 &lt;= n &lt; 3</tt> which says
that <tt class="docutils literal">n</tt> is <tt class="docutils literal">1</tt> or <tt class="docutils literal">2</tt>. I could destruct it, apply
<tt class="docutils literal">lt_eq_cases</tt> and destruct it again, but I would be stuck with a
useless <tt class="docutils literal">1 &lt; n</tt> in the first case.</p>
<p>I wasn't expecting to have a hard time with something that looks so
simple.</p>
</div>
<div class="section" id="answer-larsr">
<h1>Answer (larsr)</h1>
<p>Here is a proof that I think is quite understandable as one steps
through it. It stays at the level of number theory and doesn't unfold
definitions that much. I put in some comments, don't know if it makes
it more or less readable. But try to step through it in the IDE, if
you care for it...</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> ZArith.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> Znumtheory.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Inductive</span> <span class="nf">prime</span> (<span class="nv">p</span> : Z) : <span class="kt">Prop</span> :=
  prime_intro :
    <span class="mi">1</span> &lt; p -&gt; (<span class="kr">forall</span> <span class="nv">n</span> : Z, <span class="mi">1</span> &lt;= n &lt; p -&gt; rel_prime n p) -&gt; prime p.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> Lia.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chke"><span class="kn">Theorem</span> <span class="nf">prime3</span> : prime <span class="mi">3</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">prime <span class="mi">3</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chkf"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">prime <span class="mi">3</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk10"><span class="nb">constructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="mi">1</span> &lt; <span class="mi">3</span></div></blockquote><div class="alectryon-extra-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">n</span> : Z, <span class="mi">1</span> &lt;= n &lt; <span class="mi">3</span> -&gt; rel_prime n <span class="mi">3</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk11" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk11">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="mi">1</span> &lt; <span class="mi">3</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">lia</span>.                        <span class="c">(* prove 1 &lt; 3 *)</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk12" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk12">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">n</span> : Z, <span class="mi">1</span> &lt;= n &lt; <span class="mi">3</span> -&gt; rel_prime n <span class="mi">3</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk13" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk13"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= n &lt; <span class="mi">3</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rel_prime n <span class="mi">3</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk14" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk14"><span class="nb">constructor</span>.        <span class="c">(* prove rel_prime n 3 *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= n &lt; <span class="mi">3</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="mi">1</span> | n)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk15" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= n &lt; <span class="mi">3</span></span></span></span><br></div><label class="goal-separator" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk15"><hr></label><div class="goal-conclusion">(<span class="mi">1</span> | <span class="mi">3</span>)</div></blockquote><input class="alectryon-extra-goal-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk16" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= n &lt; <span class="mi">3</span></span></span></span><br></div><label class="goal-separator" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk16"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> : Z, (x | n) -&gt; (x | <span class="mi">3</span>) -&gt; (x | <span class="mi">1</span>)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk17" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk17">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= n &lt; <span class="mi">3</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="mi">1</span> | n)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk18" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk18"><span class="kr">exists</span> <span class="nv">n</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= n &lt; <span class="mi">3</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n = n * <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">lia</span>.            <span class="c">(* prove (1 | n) *)</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk19" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk19">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= n &lt; <span class="mi">3</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="mi">1</span> | <span class="mi">3</span>)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk1a" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk1a"><span class="kr">exists</span> <span class="mi">3</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= n &lt; <span class="mi">3</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="mi">3</span> = <span class="mi">3</span> * <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">lia</span>.            <span class="c">(* prove (1 | 3) *)</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
      <span class="c">(* our goal is now (x | 1), and we know (x | n) and (x | 3) *)</span>
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk1b" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk1b">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= n &lt; <span class="mi">3</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> : Z, (x | n) -&gt; (x | <span class="mi">3</span>) -&gt; (x | <span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk1c" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk1c"><span class="nb">assert</span> (Hn : n = <span class="mi">1</span> \/ n = <span class="mi">2</span>) <span class="bp">by</span> <span class="bp">lia</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= n &lt; <span class="mi">3</span></span></span></span><br><span><var>Hn</var><span class="hyp-type"><b>: </b><span>n = <span class="mi">1</span> \/ n = <span class="mi">2</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> : Z, (x | n) -&gt; (x | <span class="mi">3</span>) -&gt; (x | <span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk1d" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk1d"><span class="nb">clear</span> H. <span class="c">(* because 1 &lt;= n &lt; 3 *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Hn</var><span class="hyp-type"><b>: </b><span>n = <span class="mi">1</span> \/ n = <span class="mi">2</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> : Z, (x | n) -&gt; (x | <span class="mi">3</span>) -&gt; (x | <span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk1e" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk1e"><span class="nb">case</span> Hn.                  <span class="c">(* consider cases n=1 and n=2 *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Hn</var><span class="hyp-type"><b>: </b><span>n = <span class="mi">1</span> \/ n = <span class="mi">2</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n = <span class="mi">1</span> -&gt; <span class="kr">forall</span> <span class="nv">x</span> : Z, (x | n) -&gt; (x | <span class="mi">3</span>) -&gt; (x | <span class="mi">1</span>)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk1f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Hn</var><span class="hyp-type"><b>: </b><span>n = <span class="mi">1</span> \/ n = <span class="mi">2</span></span></span></span><br></div><label class="goal-separator" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk1f"><hr></label><div class="goal-conclusion">n = <span class="mi">2</span> -&gt; <span class="kr">forall</span> <span class="nv">x</span> : Z, (x | n) -&gt; (x | <span class="mi">3</span>) -&gt; (x | <span class="mi">1</span>)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk20" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk20">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Hn</var><span class="hyp-type"><b>: </b><span>n = <span class="mi">1</span> \/ n = <span class="mi">2</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n = <span class="mi">1</span> -&gt; <span class="kr">forall</span> <span class="nv">x</span> : Z, (x | n) -&gt; (x | <span class="mi">3</span>) -&gt; (x | <span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk21" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk21"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Hn</var><span class="hyp-type"><b>: </b><span>n = <span class="mi">1</span> \/ n = <span class="mi">2</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>n = <span class="mi">1</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(x | n)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(x | <span class="mi">3</span>)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(x | <span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk22" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk22"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Hn</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> = <span class="mi">1</span> \/ <span class="mi">1</span> = <span class="mi">2</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(x | <span class="mi">1</span>)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(x | <span class="mi">3</span>)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(x | <span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        <span class="c">(* case n = 1: proves (x | 1) because we know (x | n) *)</span>
</span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">trivial</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk23" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk23">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Hn</var><span class="hyp-type"><b>: </b><span>n = <span class="mi">1</span> \/ n = <span class="mi">2</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n = <span class="mi">2</span> -&gt; <span class="kr">forall</span> <span class="nv">x</span> : Z, (x | n) -&gt; (x | <span class="mi">3</span>) -&gt; (x | <span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk24" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk24"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Hn</var><span class="hyp-type"><b>: </b><span>n = <span class="mi">1</span> \/ n = <span class="mi">2</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>n = <span class="mi">2</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(x | n)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(x | <span class="mi">3</span>)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(x | <span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk25" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk25"><span class="nb">subst</span>.   <span class="c">(* case n = 2: we know (x | n) and (x | 3) *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Hn</var><span class="hyp-type"><b>: </b><span><span class="mi">2</span> = <span class="mi">1</span> \/ <span class="mi">2</span> = <span class="mi">2</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(x | <span class="mi">2</span>)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(x | <span class="mi">3</span>)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(x | <span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk26" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk26"><span class="nb">assert</span> (Hgcd: (x | Z.gcd <span class="mi">2</span> <span class="mi">3</span>)) <span class="bp">by</span> (<span class="nb">apply</span> Z.gcd_greatest; <span class="nb">trivial</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Hn</var><span class="hyp-type"><b>: </b><span><span class="mi">2</span> = <span class="mi">1</span> \/ <span class="mi">2</span> = <span class="mi">2</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(x | <span class="mi">2</span>)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(x | <span class="mi">3</span>)</span></span></span><br><span><var>Hgcd</var><span class="hyp-type"><b>: </b><span>(x | Z.gcd <span class="mi">2</span> <span class="mi">3</span>)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(x | <span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        <span class="c">(* Z.gcd_greatest: (x | 2) -&gt; x | 3) -&gt; (x | Z.gcd 2 3) *)</span>
</span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> Hgcd.         <span class="c">(* prove (x | 1), because Z.gcd 2 3 = 1 *)</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre></div>
<div class="section" id="answer-arthur-azevedo-de-amorim">
<h1>Answer (Arthur Azevedo De Amorim)</h1>
<p>The lemma you mentioned is actually proved in that library, under the
name <tt class="docutils literal">prime_3</tt>. You can look up its proof on <a class="reference external" href="https://github.com/coq/coq/blob/master/theories/ZArith/Znumtheory.v">GitHub</a>.</p>
<p>You mentioned how strange it is to have such a hard time to prove
something so simple. Indeed, the proof in the standard library is
quite complicated. Luckily, there are much better ways to work out
this result. The <a class="reference external" href="https://github.com/math-comp/math-comp">Mathematical Components</a> library advocates for a
different style of development based on boolean properties. There,
<tt class="docutils literal">prime</tt> is not an inductively defined predicate, but a function
<tt class="docutils literal">nat <span class="pre">-&gt;</span> bool</tt> that checks whether its argument is prime. Because of
this, we can prove such simple facts by computation:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> Coq <span class="kn">Require Import</span> ssreflect ssrbool.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> mathcomp <span class="kn">Require Import</span> ssrnat prime.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk27" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk27"><span class="kn">Lemma</span> <span class="nf">prime_3</span> : prime <span class="mi">3</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">prime <span class="mi">3</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk28" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk28"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">prime <span class="mi">3</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><p>There is a bit of magic going on here: the library declares a coercion
<tt class="docutils literal">is_true : bool <span class="pre">-&gt;</span> Prop</tt> that is automatically inserted whenever a
boolean is used in a place where a proposition is expected. It is
defined as follows:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">is_true</span> (<span class="nv">b</span> : bool) : <span class="kt">Prop</span> := b = true.</span></span></pre><p>Thus, what <tt class="docutils literal">prime_3</tt> really is proving above is <tt class="docutils literal">prime 3 = true</tt>,
which is what makes that simple proof possible.</p>
<p>The library allows you to connect this boolean notion of what a prime
number is to a more conventional one via a <em>reflection lemma</em>:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> mathcomp <span class="kn">Require Import</span> div eqtype.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk29" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk29"><span class="kn">Lemma</span> <span class="nf">primeP</span> <span class="nv">p</span> :
  reflect (p &gt; <span class="mi">1</span> /\ <span class="kr">forall</span> <span class="nv">d</span>, d %| p -&gt; xpred2 <span class="mi">1</span> p d) (prime p).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>p</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">reflect
  (<span class="mi">1</span> &lt; p /\ (<span class="kr">forall</span> <span class="nv">d</span> : nat, d %| p -&gt; xpred2 <span class="mi">1</span> p d))
  (prime p)</div></blockquote></div></div></small></span></pre><p>Unpacking notations and definitions, what this statement says is that
<tt class="docutils literal">prime p</tt> equals <tt class="docutils literal">true</tt> if and only if <tt class="docutils literal">p &gt; 1</tt> and every <tt class="docutils literal">d</tt>
that divides <tt class="docutils literal">p</tt> is equal to <tt class="docutils literal">1</tt> or <tt class="docutils literal">p</tt>. I am afraid it would be
a lengthy detour to explain how this reflection lemma works exactly,
but if you find this interesting I strongly encourage you to look up
more about Mathematical Components.</p>
</div>
<div class="section" id="answer-epoiner">
<h1>Answer (epoiner)</h1>
<p>I have a variant of &#64;larsr's proof.</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> ZArith.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> Znumtheory.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> Lia.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk2a" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk2a"><span class="kn">Theorem</span> <span class="nf">prime3</span> : prime <span class="mi">3</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">prime <span class="mi">3</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk2b" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk2b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">prime <span class="mi">3</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk2c" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk2c"><span class="nb">constructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="mi">1</span> &lt; <span class="mi">3</span></div></blockquote><div class="alectryon-extra-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">n</span> : Z, <span class="mi">1</span> &lt;= n &lt; <span class="mi">3</span> -&gt; rel_prime n <span class="mi">3</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk2d" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk2d">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="mi">1</span> &lt; <span class="mi">3</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk2e" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk2e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">n</span> : Z, <span class="mi">1</span> &lt;= n &lt; <span class="mi">3</span> -&gt; rel_prime n <span class="mi">3</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk2f" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk2f"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= n &lt; <span class="mi">3</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rel_prime n <span class="mi">3</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk30" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk30"><span class="nb">assert</span> (n = <span class="mi">1</span> \/ n = <span class="mi">2</span>) <span class="kr">as</span> Ha <span class="bp">by</span> <span class="bp">lia</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= n &lt; <span class="mi">3</span></span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>n = <span class="mi">1</span> \/ n = <span class="mi">2</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rel_prime n <span class="mi">3</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">destruct</span> Ha; <span class="nb">subst</span> n; <span class="nb">apply</span> Zgcd_is_gcd.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><p>Like &#64;larsr's proof, we prove that <tt class="docutils literal">1 &lt; 3</tt> using <tt class="docutils literal">lia</tt> and then
prove that either <tt class="docutils literal">n = 1</tt> or <tt class="docutils literal">n = 2</tt> using <tt class="docutils literal">lia</tt> again.</p>
<p>To prove <tt class="docutils literal">rel_prime 1 3</tt> and <tt class="docutils literal">rel_prime 2 3</tt> which are defined in
terms of <tt class="docutils literal">Zis_gcd</tt>, we apply <tt class="docutils literal">Zgcd_is_gcd</tt>. This lemma states that
computing the <tt class="docutils literal">gcd</tt> is enough. This is trivial on concrete inputs
like <tt class="docutils literal">(1, 3)</tt> and <tt class="docutils literal">(2, 3)</tt>.</p>
<p><strong>EDIT:</strong> We can generalize this result, using only Gallina. We define
a boolean function <tt class="docutils literal">is_prime</tt> that we prove correct w.r.t. the
inductive specification <tt class="docutils literal">prime</tt>. I guess this can be done in a more
elegant way, but I am confused with all the lemmas related to <tt class="docutils literal">Z</tt>.
Moreover, some of the definitions are opaque and cannot be used (at
least directly) to define a computable function.</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> ZArith.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> Znumtheory.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> Lia.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> Bool.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> Recdef.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** [for_all] checks that [f] is true for any integer between 1 and [n] *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk31" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk31"><span class="kn">Function</span> <span class="nf">for_all</span> (f : Z -&gt; bool) n {<span class="kn">measure</span> Z.to_nat n} :=
  <span class="kr">if</span> n &lt;=? <span class="mi">1</span> <span class="kr">then</span> true
  <span class="kr">else</span> f (n - <span class="mi">1</span>) &amp;&amp; for_all f (n - <span class="mi">1</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">(Z -&gt; bool) -&gt;
<span class="kr">forall</span> <span class="nv">n</span> : Z,
(n &lt;=? <span class="mi">1</span>) = false -&gt;
(Z.to_nat (n - <span class="mi">1</span>) &lt; Z.to_nat n)%nat</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk32" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk32"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">(Z -&gt; bool) -&gt;
<span class="kr">forall</span> <span class="nv">n</span> : Z,
(n &lt;=? <span class="mi">1</span>) = false -&gt;
(Z.to_nat (n - <span class="mi">1</span>) &lt; Z.to_nat n)%nat</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk33" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk33"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; bool</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>teq</var><span class="hyp-type"><b>: </b><span>(n &lt;=? <span class="mi">1</span>) = false</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(Z.to_nat (n - <span class="mi">1</span>) &lt; Z.to_nat n)%nat</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk34" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk34"><span class="nb">apply</span> Z.leb_nle <span class="kr">in</span> teq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; bool</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>teq</var><span class="hyp-type"><b>: </b><span>~ n &lt;= <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(Z.to_nat (n - <span class="mi">1</span>) &lt; Z.to_nat n)%nat</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> Z2Nat.inj_lt; <span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk35" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk35"><span class="kn">Lemma</span> <span class="nf">for_all_spec</span> : <span class="kr">forall</span> <span class="nv">f</span> <span class="nv">n</span>,
    for_all f n = true -&gt; <span class="kr">forall</span> <span class="nv">k</span>, <span class="mi">1</span> &lt;= k &lt; n -&gt; f k = true.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">f</span> : Z -&gt; bool) (<span class="nv">n</span> : Z),
for_all f n = true -&gt;
<span class="kr">forall</span> <span class="nv">k</span> : Z, <span class="mi">1</span> &lt;= k &lt; n -&gt; f k = true</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk36" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk36"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">f</span> : Z -&gt; bool) (<span class="nv">n</span> : Z),
for_all f n = true -&gt;
<span class="kr">forall</span> <span class="nv">k</span> : Z, <span class="mi">1</span> &lt;= k &lt; n -&gt; f k = true</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk37" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk37"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; bool</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>for_all f n = true</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= k &lt; n</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f k = true</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk38" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk38"><span class="nb">assert</span> (<span class="mi">0</span> &lt;= n) <span class="bp">by</span> <span class="bp">lia</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; bool</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>for_all f n = true</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= k &lt; n</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="mi">0</span> &lt;= n</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f k = true</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk39" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk39"><span class="nb">revert</span> n H1 k H0 H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; bool</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">n</span> : Z,
<span class="mi">0</span> &lt;= n -&gt;
<span class="kr">forall</span> <span class="nv">k</span> : Z,
<span class="mi">1</span> &lt;= k &lt; n -&gt; for_all f n = true -&gt; f k = true</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk3a" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk3a"><span class="nb">apply</span> (natlike_ind
           (<span class="kr">fun</span> <span class="nv">n</span> =&gt; <span class="kr">forall</span> <span class="nv">k</span> : Z,
                <span class="mi">1</span> &lt;= k &lt; n -&gt; for_all f n = true -&gt; f k = true)); <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; bool</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= k &lt; <span class="mi">0</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>for_all f <span class="mi">0</span> = true</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f k = true</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk3b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; bool</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="mi">0</span> &lt;= x</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : Z,
<span class="mi">1</span> &lt;= k &lt; x -&gt; for_all f x = true -&gt; f k = true</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= k &lt; Z.succ x</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>for_all f (Z.succ x) = true</span></span></span><br></div><label class="goal-separator" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk3b"><hr></label><div class="goal-conclusion">f k = true</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk3c" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk3c">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; bool</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= k &lt; <span class="mi">0</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>for_all f <span class="mi">0</span> = true</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f k = true</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk3d" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk3d">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; bool</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="mi">0</span> &lt;= x</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : Z,
<span class="mi">1</span> &lt;= k &lt; x -&gt; for_all f x = true -&gt; f k = true</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= k &lt; Z.succ x</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>for_all f (Z.succ x) = true</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f k = true</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk3e" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk3e"><span class="nb">rewrite</span> for_all_equation <span class="kr">in</span> H2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; bool</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="mi">0</span> &lt;= x</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : Z,
<span class="mi">1</span> &lt;= k &lt; x -&gt; for_all f x = true -&gt; f k = true</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= k &lt; Z.succ x</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(<span class="kr">if</span> Z.succ x &lt;=? <span class="mi">1</span>
 <span class="kr">then</span> true
 <span class="kr">else</span>
  f (Z.succ x - <span class="mi">1</span>) &amp;&amp; for_all f (Z.succ x - <span class="mi">1</span>)) =
true</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f k = true</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk3f" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk3f"><span class="nb">destruct</span> (Z.leb_spec0 (Z.succ x) <span class="mi">1</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; bool</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="mi">0</span> &lt;= x</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : Z,
<span class="mi">1</span> &lt;= k &lt; x -&gt; for_all f x = true -&gt; f k = true</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= k &lt; Z.succ x</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>true = true</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>Z.succ x &lt;= <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f k = true</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk40" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; bool</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="mi">0</span> &lt;= x</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : Z,
<span class="mi">1</span> &lt;= k &lt; x -&gt; for_all f x = true -&gt; f k = true</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= k &lt; Z.succ x</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>f (Z.succ x - <span class="mi">1</span>) &amp;&amp; for_all f (Z.succ x - <span class="mi">1</span>) =
true</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>~ Z.succ x &lt;= <span class="mi">1</span></span></span></span><br></div><label class="goal-separator" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk40"><hr></label><div class="goal-conclusion">f k = true</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk41" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk41">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; bool</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="mi">0</span> &lt;= x</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : Z,
<span class="mi">1</span> &lt;= k &lt; x -&gt; for_all f x = true -&gt; f k = true</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= k &lt; Z.succ x</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>true = true</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>Z.succ x &lt;= <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f k = true</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk42" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk42">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; bool</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="mi">0</span> &lt;= x</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : Z,
<span class="mi">1</span> &lt;= k &lt; x -&gt; for_all f x = true -&gt; f k = true</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= k &lt; Z.succ x</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>f (Z.succ x - <span class="mi">1</span>) &amp;&amp; for_all f (Z.succ x - <span class="mi">1</span>) =
true</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>~ Z.succ x &lt;= <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f k = true</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk43" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk43"><span class="nb">replace</span> (Z.succ x - <span class="mi">1</span>) <span class="kr">with</span> x <span class="kr">in</span> H2 <span class="bp">by</span> <span class="bp">lia</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; bool</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="mi">0</span> &lt;= x</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : Z,
<span class="mi">1</span> &lt;= k &lt; x -&gt; for_all f x = true -&gt; f k = true</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= k &lt; Z.succ x</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>f x &amp;&amp; for_all f x = true</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>~ Z.succ x &lt;= <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f k = true</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk44" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk44"><span class="nb">apply</span> andb_true_iff <span class="kr">in</span> H2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; bool</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="mi">0</span> &lt;= x</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : Z,
<span class="mi">1</span> &lt;= k &lt; x -&gt; for_all f x = true -&gt; f k = true</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= k &lt; Z.succ x</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>f x = true /\ for_all f x = true</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>~ Z.succ x &lt;= <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f k = true</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk45" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk45"><span class="nb">assert</span> (k &lt; x \/ k = x) <span class="bp">by</span> <span class="bp">lia</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; bool</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="mi">0</span> &lt;= x</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : Z,
<span class="mi">1</span> &lt;= k &lt; x -&gt; for_all f x = true -&gt; f k = true</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= k &lt; Z.succ x</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>f x = true /\ for_all f x = true</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>~ Z.succ x &lt;= <span class="mi">1</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>k &lt; x \/ k = x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f k = true</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk46" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk46"><span class="nb">destruct</span> H3.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; bool</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="mi">0</span> &lt;= x</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : Z,
<span class="mi">1</span> &lt;= k &lt; x -&gt; for_all f x = true -&gt; f k = true</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= k &lt; Z.succ x</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>f x = true /\ for_all f x = true</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>~ Z.succ x &lt;= <span class="mi">1</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>k &lt; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f k = true</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk47" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; bool</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="mi">0</span> &lt;= x</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : Z,
<span class="mi">1</span> &lt;= k &lt; x -&gt; for_all f x = true -&gt; f k = true</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= k &lt; Z.succ x</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>f x = true /\ for_all f x = true</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>~ Z.succ x &lt;= <span class="mi">1</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>k = x</span></span></span><br></div><label class="goal-separator" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk47"><hr></label><div class="goal-conclusion">f k = true</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk48" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk48">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; bool</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="mi">0</span> &lt;= x</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : Z,
<span class="mi">1</span> &lt;= k &lt; x -&gt; for_all f x = true -&gt; f k = true</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= k &lt; Z.succ x</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>f x = true /\ for_all f x = true</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>~ Z.succ x &lt;= <span class="mi">1</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>k &lt; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f k = true</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> H0; [<span class="bp">lia</span> | <span class="nb">apply</span> H2].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk49" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk49">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; bool</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="mi">0</span> &lt;= x</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : Z,
<span class="mi">1</span> &lt;= k &lt; x -&gt; for_all f x = true -&gt; f k = true</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= k &lt; Z.succ x</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>f x = true /\ for_all f x = true</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>~ Z.succ x &lt;= <span class="mi">1</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>k = x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f k = true</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk4a" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk4a"><span class="nb">subst</span> k.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; bool</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="mi">0</span> &lt;= x</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : Z,
<span class="mi">1</span> &lt;= k &lt; x -&gt; for_all f x = true -&gt; f k = true</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= x &lt; Z.succ x</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>f x = true /\ for_all f x = true</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>~ Z.succ x &lt;= <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f x = true</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> H2.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">is_prime</span> (<span class="nv">p</span> : Z) :=
  (<span class="mi">1</span> &lt;? p) &amp;&amp; for_all (<span class="kr">fun</span> <span class="nv">k</span> =&gt; Z.gcd k p =? <span class="mi">1</span>) p.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk4b" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk4b"><span class="kn">Theorem</span> <span class="nf">is_prime_correct</span> : <span class="kr">forall</span> <span class="nv">z</span>, is_prime z = true -&gt; prime z.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">z</span> : Z, is_prime z = true -&gt; prime z</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk4c" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk4c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">z</span> : Z, is_prime z = true -&gt; prime z</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk4d" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk4d"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>z</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>is_prime z = true</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prime z</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk4e" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk4e"><span class="nb">unfold</span> is_prime <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>z</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>(<span class="mi">1</span> &lt;? z) &amp;&amp;
for_all (<span class="kr">fun</span> <span class="nv">k</span> : Z =&gt; Z.gcd k z =? <span class="mi">1</span>) z = true</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prime z</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk4f" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk4f"><span class="nb">apply</span> andb_true_iff <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>z</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>(<span class="mi">1</span> &lt;? z) = true /\
for_all (<span class="kr">fun</span> <span class="nv">k</span> : Z =&gt; Z.gcd k z =? <span class="mi">1</span>) z = true</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prime z</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk50" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk50"><span class="nb">destruct</span> H <span class="kr">as</span> (H &amp; H0).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>z</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>(<span class="mi">1</span> &lt;? z) = true</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>for_all (<span class="kr">fun</span> <span class="nv">k</span> : Z =&gt; Z.gcd k z =? <span class="mi">1</span>) z = true</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prime z</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk51" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk51"><span class="nb">constructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>z</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>(<span class="mi">1</span> &lt;? z) = true</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>for_all (<span class="kr">fun</span> <span class="nv">k</span> : Z =&gt; Z.gcd k z =? <span class="mi">1</span>) z = true</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="mi">1</span> &lt; z</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk52" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>z</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>(<span class="mi">1</span> &lt;? z) = true</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>for_all (<span class="kr">fun</span> <span class="nv">k</span> : Z =&gt; Z.gcd k z =? <span class="mi">1</span>) z = true</span></span></span><br></div><label class="goal-separator" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk52"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">n</span> : Z, <span class="mi">1</span> &lt;= n &lt; z -&gt; rel_prime n z</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk53" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk53">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>z</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>(<span class="mi">1</span> &lt;? z) = true</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>for_all (<span class="kr">fun</span> <span class="nv">k</span> : Z =&gt; Z.gcd k z =? <span class="mi">1</span>) z = true</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="mi">1</span> &lt; z</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk54" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk54"><span class="nb">apply</span> Z.ltb_lt.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>z</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>(<span class="mi">1</span> &lt;? z) = true</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>for_all (<span class="kr">fun</span> <span class="nv">k</span> : Z =&gt; Z.gcd k z =? <span class="mi">1</span>) z = true</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="mi">1</span> &lt;? z) = true</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk55" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk55">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>z</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>(<span class="mi">1</span> &lt;? z) = true</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>for_all (<span class="kr">fun</span> <span class="nv">k</span> : Z =&gt; Z.gcd k z =? <span class="mi">1</span>) z = true</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">n</span> : Z, <span class="mi">1</span> &lt;= n &lt; z -&gt; rel_prime n z</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk56" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk56"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>z</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>(<span class="mi">1</span> &lt;? z) = true</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>for_all (<span class="kr">fun</span> <span class="nv">k</span> : Z =&gt; Z.gcd k z =? <span class="mi">1</span>) z = true</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= n &lt; z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rel_prime n z</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk57" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk57"><span class="nb">apply</span> for_all_spec <span class="kr">with</span> (k := n) <span class="kr">in</span> H0; <span class="kp">try</span> <span class="bp">assumption</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>z</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>(<span class="mi">1</span> &lt;? z) = true</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(Z.gcd n z =? <span class="mi">1</span>) = true</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= n &lt; z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rel_prime n z</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk58" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk58"><span class="nb">unfold</span> rel_prime.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>z</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>(<span class="mi">1</span> &lt;? z) = true</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(Z.gcd n z =? <span class="mi">1</span>) = true</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= n &lt; z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Zis_gcd n z <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk59" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk59"><span class="nb">apply</span> Z.eqb_eq <span class="kr">in</span> H0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>z</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>(<span class="mi">1</span> &lt;? z) = true</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Z.gcd n z = <span class="mi">1</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= n &lt; z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Zis_gcd n z <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk5a" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk5a"><span class="nb">rewrite</span> &lt;- H0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>z</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>(<span class="mi">1</span> &lt;? z) = true</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Z.gcd n z = <span class="mi">1</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt;= n &lt; z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Zis_gcd n z (Z.gcd n z)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> Zgcd_is_gcd.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><p>The proof becomes nearly as simple as &#64;Arthur's one.</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk5b" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk5b"><span class="kn">Theorem</span> <span class="nf">prime113</span> : prime <span class="mi">113</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">prime <span class="mi">113</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk5c" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk5c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">prime <span class="mi">113</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> is_prime_correct; <span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre></div>
<div class="section" id="answer-larsr-1">
<h1>Answer (larsr)</h1>
<p>Fun fact: &#64;epoiner's answer can be used together with Ltac in a proof
script for any prime number.</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk5d" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk5d"><span class="kn">Theorem</span> <span class="nf">prime113</span> : prime <span class="mi">113</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">prime <span class="mi">113</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk5e" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk5e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">prime <span class="mi">113</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk5f" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk5f"><span class="nb">constructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="mi">1</span> &lt; <span class="mi">113</span></div></blockquote><div class="alectryon-extra-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">n</span> : Z, <span class="mi">1</span> &lt;= n &lt; <span class="mi">113</span> -&gt; rel_prime n <span class="mi">113</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk60" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk60">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="mi">1</span> &lt; <span class="mi">113</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk61" style="display: none" type="checkbox"><label class="alectryon-input" for="how-to-prove-that-a-number-is-prime-using-znumtheory-in-coq-v-chk61">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">n</span> : Z, <span class="mi">1</span> &lt;= n &lt; <span class="mi">113</span> -&gt; rel_prime n <span class="mi">113</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span> n H;
      <span class="kp">repeat</span> <span class="kr">match goal with</span>
             | H : <span class="mi">1</span> &lt;= <span class="nl">?n</span> &lt; <span class="nl">?a</span>  |- _ =&gt;
               <span class="nb">assert</span> (Hn: n = a - <span class="mi">1</span> \/ <span class="mi">1</span> &lt;= n &lt; a - <span class="mi">1</span>) <span class="bp">by</span> <span class="bp">lia</span>;
                 <span class="nb">clear</span> H; <span class="nb">destruct</span> Hn <span class="kr">as</span> [Hn | H];
                   [<span class="nb">subst</span> n; <span class="nb">apply</span> Zgcd_is_gcd | <span class="nb">simpl</span> <span class="kr">in</span> H; <span class="kp">try</span> <span class="bp">lia</span> ]
             <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><p>However, the proof term gets unwieldy, and checking becomes slower and
slower. This is why it small scale reflection (ssreflect) where
computation is moved into the type checking probably is preferrable in
the long run. It's hard to beat &#64;Arthur Azevedo De Amorim's proof:
<tt class="docutils literal">Proof. reflexivity. Qed.</tt> :-) Both in terms of computation time,
and memory-wise.</p>
</div>
</div>
</div>
</div></body>
</html>
